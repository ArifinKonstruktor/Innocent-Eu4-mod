# made by a friendly elephant for Missions Expanded
mongolia_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = KHA
	}
	has_country_shield = yes

	kha_timurids = {
		icon = mission_persian_soldiers
		position = 6
		required_missions = { kha_uzbek }
		provinces_to_highlight = {
			OR = {
				province_id = 454
				province_id = 4344
			}
			NOT = { owned_by = ROOT }
		}

		trigger = {
			owns_core_province = 454
			owns_core_province = 4344
		}

		effect = {
			# LEMON HELP WE NEED AN EVENT
		}
	}
}

mongolia_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = KHA
	}
	has_country_shield = yes

	kha_uzbek = {
		icon = mission_chinese_general_riding
		position = 5
		required_missions = { kha_unite_chagatai }

		trigger = {
			ishim_area = {
				type = all
				owned_by = ROOT
			}
			balchasj_area = {
				type = all
				owned_by = ROOT
			}
			syr_darya_area = {
				type = all
				owned_by = ROOT
			}
			kyzylkum_area = {
				type = all
				owned_by = ROOT
			}
		}

		effect = {
			kazakhstan_area = {
				add_permanent_claim = ROOT
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
			}
			nogai_area = {
				add_permanent_claim = ROOT
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
			}
			lower_yik_area = {
				add_permanent_claim = ROOT
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
			}
			bashkiria_area = {
				add_permanent_claim = ROOT
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
			}
			transoxiana_area = {
				add_permanent_claim = ROOT
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
			}
		}
	}

	kha_nogai = {
		icon = mission_assemble_an_army
		position = 6
		required_missions = { kha_uzbek }

		trigger = {
			lower_yik_area = {
				type = all
				owned_by = ROOT
			}
			nogai_area = {
				type = all
				owned_by = ROOT
			}
			kazakhstan_area = {
				type = all
				owned_by = ROOT
			}
		}

		event = {
			saratov_area = {
				add_permanent_claim = ROOT
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
			}
			astrakhan_area = {
				add_permanent_claim = ROOT
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
			}
			lower_don_area = {
				add_permanent_claim = ROOT
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
			}
			tambov_area = {
				add_permanent_claim = ROOT
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
			}
			add_casus_belli = {
				target = GOL
				type = cb_vassalize_mission
				months = 600
			}
		}
	}

	kha_mongol_people = {
		icon = mission_eastern_european_city
		position = 7
		required_missions = { kha_nogai }

		trigger = {
			OR = {
				GOL = { is_subject = yes }
				GOL = { exists = no }
				AND = {
					astrakhan_area = {
						type = all
						owned_by = ROOT
					}
					tambov_area = {
						type = all
						owned_by = ROOT
					}
				}
			}
		}

		effect = {
			add_legitimacy_equivalent = 20
			add_prestige = 20
			russia_region = {
				add_permanent_claim = ROOT
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
			}
			284 = {
				add_permanent_claim = ROOT
			}
			2411 = {
				add_permanent_claim = ROOT
			}
		}
	}

	kha_crimea = {
		icon = mission_steppe_warriors
		position = 8
		required_missions = { kha_mongol_people }
		provinces_to_highlight = {
			province_id = 284
			province_id = 2411
		}

		trigger = {
			284 = { owned_by = ROOT }
			2411 = { owned_by = ROOT }
		}

		effect = {
			crimea_area = {
				add_nationalism -20
			}
		}
	}
}

mongolia_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = KHA
	}
	has_country_shield = yes

	kha_prepare = {
		icon = mission_assemble_an_army
		position = 1
		required_missions = { }

		trigger = {
			army_size_percentage = 1
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_independence"
				duraiton = 5475
			}
			uliastai_area = {
				add_permanent_claim = ROOT
			}
			tannu_uriankhai_area = {
				add_permanent_claim = ROOT
			}
			north_zungaria = {
				add_permanent_claim = ROOT
			}
			709 = {
				add_permanent_claim = ROOT
			}
			2191 = {
				add_permanent_claim = ROOT
			}
			2193 = {
				add_permanent_claim = ROOT
			}
			4206 = {
				add_permanent_claim = ROOT
			}
		}
	}

	kha_independence = {
		icon = mission_non-western_cavalry_raid
		position = 2
		required_missions = { kha_prepare }

		trigger = {
			OR = {
				offensive_war_with = OIR
				AND = {
					NOT = { is_at_war = KHA }
					is_subject = no
				}
			}
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_desire"
				duration = 1825
			}
		}
	}

	kha_past = {
		icon = mission_unite_home_region
		position = 3
		required_missions = { kha_independence }
		provinces_to_highlight = {
			OR = {
				area = central_mongolia_area
				area = ordos_area
				area = uliastai_area
				province_id = 709
				province_id = 2191
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			OR = {
				CHG = {
					is_subject_of = ROOT
				}
				AND = {
					owns_core_province = 709
					owns_core_province = 2191
					central_mongolia_area = {
						type = all
						owned_by = ROOT
					}
					ordos_area = {
						type = all
						owned_by = ROOT
					}
					uliastai_area = {
						type = all
						owned_by = ROOT
					}
				}
			}
		}

		effect = {
			add_casus_belli = {
				target = CHG
				type = cb_vassalize_mission
				months = 600
			}
			add_accepted_culture = oirats
			add_country_modifier = {
				name = "mongolia_overcoming"
			}
			add_legitimacy_equivalent = { value = 15 }
		}
	}

	kha_unite_chagatai = {
		icon = mission_pf_map_table
		position = 4
		required_missions = { kha_past }

		trigger = {
			NOT = { exists = CHG }
		}

		effect = {
			add_accepted_culture = uyghur
			add_country_modifier = {
				name = "mongolia_among_the_great_khans"
			}
			west_siberia_region = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			kashgaria_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			tarim_basin_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			shanshan_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			amdo_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			balchasj_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			syr_darya_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			kyzylkum_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			yrtesh_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			ob_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
			ural_area = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
				add_permanent_claim = ROOT
			}
		}
	}

	kha_yarkand_and_yogir = {
		icon = mission_manchu_warrior
		position = 5
		required_missions = { kha_unite_chagatai }
		provinces_to_highlight = {
			OR = {
				area = kashgaria_area
				area = tarim_basin_area
				area = amdo_area
				area = shanshan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			kashgaria_area = {
				type = all
				owned_by = ROOT
			}
			tarim_basin_area = {
				type = all
				owned_by = ROOT
			}
			amdo_area = {
				type = all
				owned_by = ROOT
			}
			shanshan_area = {
				type = all
				owned_by = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_united_administration"
			}
			# NEEDS EVENT LEMON
		}
	}

	kha_yuan = {
		icon = mission_empire
		position = 6
		required missions = { kha_yarkand_and_yogir kha_seize_empire }

		trigger = {
			OR = {
				horde_unity = 90
				meritocracy = 90
			}
		}

		effect = {
			add_adm_power = 75
			add_dip_power = 75
			add_mil_power = 75
			set_dynasty = "Yuan"
			add_country_modifier = {
				name = "mongolia_yuan_restored"
			}
			# lemon we need an event here
		}
	}
}

mongolia_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = KHA
	}
	has_country_shield = yes

	kha_beijing = {
		icon = mission_steppe_warriors
		position = 2
		required_missions = { kha_independence }
		provinces_to_highlight = {
			province_id = 1816
		}

		trigger = {
			1816 = {
				owned_by = ROOT
			}
		}

		effect = {
			north_china_region = {
				limit = {
        			NOT = { owned_by = ROOT }
        			NOT = { is_core = ROOT }
    			}
    			add_permanent_claim = ROOT
			}
			hebei_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	kha_yangtze = {
		icon = mission_early_game_buildings
		position = 3
		required_missions = { kha_beijing }
		provinces_to_highlight = {
			limit = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
			province_id = 2171
			province_id = 688
		}

		trigger = {
			2171 = { owned_by = ROOT }
			688 = { owned_by = ROOT }
		}

		effect = {
			south_china_region = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			zhejiang_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "mongolia_long_river"
			}
		}
	}

	kha_seize_empire = {
		icon = mission_japanese_fort
		position = 5

		trigger = {
			if = {
				limit = {
					has_dlc = "Mandate of Heaven"
				}
				is_emperor_of_china = yes
			}
			else = {
				2139 = { owned_by = ROOT }
				2140 = { owned_by = ROOT }
			}
		}

		effect = {
			random_country = {
				limit = {
					has_country_modifier = lost_mandate_of_heaven
				}
				every_neighbor_country = {
					reverse_add_opinion = {
						who = PREV
						modifier = sabatoged_reputation
					}
				}
			}
			every_neighbor_country = {
				reverse_add_opinion = {
					who = ROOT
					modifier = in_same_trade_league
				}
			}
			# LEMON WE NEED THE QUFU EVENT
		}
	}

	kha_oceans = {
		icon = mission_invade_island
		position = 7
		required_missions = { kha_neglect }
		provinces_to_highlight = {
			OR = {
				province_id = 1033
				province_id = 33
			}
			NOT = { owned_by = ROOT }
		}

		trigger = {
			owns_core_province = 1033
			owns_core_province = 33
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_hemispheres"
			}
		}
	}

	kha_russia = {
		icon = mission_steppe_warriors
		position = 8
		required_missions = { mongolia_mongol_people }
		provinces_to_highlight = {
			OR = {
				province_id = 301
				province_id = 1778
				province_id = 1956
				province_id = 308
				province_id = 294
				province_id = 4253
				province_id = 1956
			}
			NOT = { owned_by = ROOT }
		}

		trigger = {
			AND = {
				owns_core_province = 301
				owns_core_province = 1778
				owns_core_province = 1956
				owns_core_province = 308
				owns_core_province = 294
				owns_core_province = 4254
				owns_core_province = 1956
			}
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_conquered_russia"
			}
			russia_region = {
				add_province_modifier = {
					name = "mongolia_razed_russia"
				}
			}
		}
	}
}

mongolia_missions_5 = {
	slot = 5
	generic = no
	ai = yes
	potential =  {
		tag = KHA
	}
	has_country_shield = yes

	kha_korchin = {
		icon = mission_non-western_cavalry_raid
		position = 3		
		required_missions = { kha_independence }
		provinces_to_highlight = {
			area = eastern_mongolia
			area = heilongjiang_area
			limit = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}

		trigger = {
			eastern_mongolia = { owned_by = ROOT }
			heilongjiang_area = { owned_by = ROOT }
		}

		effect = {
			central_heilongjiang_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_heilongjiang_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "mongolia_neighbors"
			}
			add_accepted_culture = chahar
		}
	}

	kha_manchus = {
		icon = mission_unite_home_region
		position = 4
		required_missions = { kha_korchin }
		# LEMON I DON'T KNOW WHAT TO PUT HERE
	}

	kha_steppe_life = {
		icon = mission_non-western_cavalry_raid
		position = 5
		required_missions = { }

		trigger = {
			num_of_cavalry > 20
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_elite_cavalry"
				duration = 7300
			}
		}
	}

	kha_neglect = {
		icon = mission_hands_praying
		position = 5
		required_missions = { kha_steppe_life }

		trigger = {
			any_owned_province = {
				religion = tengri
			}
			any_owned_province = {
				OR = {
					religion = catholic
					religion = protestant
					religion = reformed
					religion = orthodox
					religion = coptic
					religion = anglican
				}
			}
			any_owned_province = {
				OR = {
					religion = sunni
					religion = shia
					religion = ibadi
				}
			}
			any_owned_province = {
				religion = animist
			}
			any_owned_province = {
				religion = vajrayana
			}
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_benign_neglect"
			}
		}
	}

	kha_unite_tengri = {
		icon = mission_unite_home_region
		position = 6
		required_missions = { kha_neglect }

		trigger = {
			every_province = {
				limit = {
					religion = tengri
				}
				owned_by = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = "mongolia_united_tengri"
			}
			every_owned_province = {
				limit = {
					religion = tengri
				}
				add_nationalism = -20
			}
		}
	}
}