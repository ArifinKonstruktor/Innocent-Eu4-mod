ragusa_missions_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		tag = RAG
	}
	has_country_shield = yes
	
	ragusa_balkan_latin_republic = {
		icon = mission_have_manufactories
		required_missions = { }
		position = 1
		trigger = {
			army_size_percentage = 1
			if = {
				limit = {
					any_country = {
						culture_group = latin
					}
				}
				any_country = {
					culture_group = latin
					has_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
			if = {
				limit = {
					any_country = {
						culture_group = south_slavic
					}
				}
				any_country = {
					culture_group = south_slavic
					has_opinion = {
						who = ROOT
						value = 75
					}
				}
			}
		}
		effect = {
			add_adm_power = 50
			add_dip_power = 50
			east_adriatic_coast_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				add_core = ROOT
			}
			bosnia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			serbia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			rascia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	ragusa_shores_dalmatia = {
		icon = mission_establish_high_seas_navy
		required_missions = { ragusa_balkan_latin_republic }
		position = 2
		provinces_to_highlight = {
			area = east_adriatic_coast_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			east_adriatic_coast_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			custom_tooltip = RAGUSA_TRADE_NODE_TT
			hidden_effect = {
				137 = {
					every_trade_node_member_province = {
						limit = {
							has_port = yes
							NOT = { owned_by = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}
	
	ragusa_safe_adriatic_balkans = {
		icon = mission_dominate_home_trade_node
		required_missions = { ragusa_shores_dalmatia }
		position = 4
		provinces_to_highlight = {
			any_trade_node_member_province = {
				province_id = 137
			}
			has_port = yes
			NOT = { owned_by = ROOT }
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				has_port = yes
				any_trade_node_member_province = {
					province_id = 137
				}
			}
		}
		effect = {
			add_dip_power = 100
			add_mil_power = 100
			add_adm_power = 100
			add_mercantilism = 5
			add_republican_tradition = 5
		}
	}
	
	ragusa_northern_adriatic_coast = {
		icon = mission_early_game_buildings
		required_missions = { ragusa_new_republic }
		position = 6
		provinces_to_highlight = {
			OR = {
				area = east_adriatic_coast_area
				area = croatia_area
				area = carinthia_area
			}
			has_port = yes
			NOT = { owned_by = ROOT }
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					area = east_adriatic_coast_area
					area = croatia_area
					area = carinthia_area
				}
				has_port = yes
			}
		}
		effect = {
			custom_tooltip = VEN_MARE_HADRIATICUM_CONQUEST_TT
			hidden_effect = {
				1308 = {
					every_trade_node_member_province = {
						limit = {
							region = italy_region
							has_port = yes
							NOT = { owned_by = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}
	
	ragusa_defying_doge = {
		icon = mission_sea_battles
		required_missions = { ragusa_northern_adriatic_coast }
		position = 7
		trigger = {
			112 = {
				owner = {
					NOT = {
						naval_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = ragusa_doge_demisal
				duration = 1825
			}
		}
	}

	ragusa_venetian_trade = {
		icon = expand_the_doges_palace
		required_missions = { ragusa_defying_doge }
		position = 9
		trigger = {
			1308 = {
				trade_share = {
					country = ROOT
					share = 15
				}
			}
		}
		effect = {
			add_mercantilism = 2
			add_country_modifier = {
				name = italian_minor_venetian_secret
				duration = 5475
			}
		}
	}
}

ragusa_missions_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		tag = RAG
	}
	has_country_shield = yes
	
	ragusa_balkan_hinterland = {
		icon = mission_cannons_firing
		required_missions = { ragusa_balkan_latin_republic }
		position = 2
		provinces_to_highlight = {
			OR = {
				area = bosnia_area
				area = rascia_area
				area = serbia_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					area = bosnia_area
					area = rascia_area
					area = serbia_area
				}
			}
		}
		effect = {
			add_mil_power = 100
			add_yearly_manpower = 1.5
		}
	}
	
	ragusa_secured_income = {
		icon = mission_assemble_an_army
		required_missions = { ragusa_balkan_hinterland }
		position = 3
		provinces_to_highlight = {
			province_id = 1776
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
				NOT = { base_production = 5 }
			}
		}
		trigger = {
			owns_core_province = 1776
			1776 = {
				base_production = 5
			}
		}
		effect = {
			1776 = {
				add_province_modifier = {
					name = ragusa_renewed_mine
					duration = -1
				}
				add_devastation = -25
				add_prosperity = 25
			}
		}
	}
	
	ragusa_new_republic = {
		icon = mission_have_two_subjects
		required_missions = {
			ragusa_safe_adriatic_balkans
			ragusa_secured_income
			ragusa_mighty_fleet
		}
		position = 5
		trigger = {
			NOT = { average_home_autonomy = 30 }
			NOT = { unrest = -1 }
			NOT = { num_of_rebel_controlled_provinces = 1 }
			NOT = { num_of_rebel_armies = 1 }
		}
		effect = {
			add_country_modifier = {
				name = ragusa_new_strength
				duration = 5475
			}
		}
	}
	
	ragusa_apulian_shores = {
		icon = mission_have_two_subjects
		required_missions = {
			ragusa_new_republic
		}
		position = 6
		provinces_to_highlight = {
			area = apulia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			apulia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			apulia_area = {
				add_base_production = 1
				if = {
					limit = { has_dlc = "Mandate of Heaven" }
					add_prosperity = 50
				}
			}
			122 = {
				create_or_add_center_of_trade_level = { level = 1 }
				add_permanent_province_modifier = {
					name = nap_lighthouse_otranto
					duration = -1
				}
			}
		}	
	}
	
	ragusa_city_ancona = {
		icon = mission_sea_battles
		required_missions = { ragusa_northern_adriatic_coast }
		position = 7
		provinces_to_highlight = {
			province_id = 119
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		trigger = {
			owns_core_province = 119
		}
		effect = {
			119 = {
				create_or_add_center_of_trade_level = { level = 1 }
			}
		}
	}
	
	ragusa_superba = {
		icon = mission_sea_battles
		required_missions = { ragusa_republic_salerno }
		position = 8
		trigger = {
			101 = {
				owner = {
					NOT = {
						naval_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = ragusa_end_republic
				duration = 3650
			}
		}
	}
	
	ragusa_rule_italian_trade = {
		icon = mission_sea_battles
		required_missions = {
			ragusa_venetian_trade
			ragusa_genoese_trade
		}
		position = 10
		provinces_to_highlight = {
			OR = {
				province_id = 2983
				province_id = 101
				province_id = 115
				province_id = 112
			}
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
		}
		trigger = {
			owns_core_province = 2983
			owns_core_province = 101
			owns_core_province = 115
			owns_core_province = 112
			mercantilism = 33
		}
		effect = {
			add_country_modifier = {
				name = ragusa_four_maritime_republic
				duration = -1
			}
		}
	}
}

ragusa_missions_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		tag = RAG
	}
	has_country_shield = yes		
	
	ragusa_saint_blaise = {
		icon = mission_unite_home_region
		required_missions = { ragusa_distant_renaissance }
		position = 2
		provinces_to_highlight = {
			province_id = 137
			OR = {
				NOT = { owned_by = ROOT }
				renaissance = 100
				NOT = { has_tax_building_trigger = yes }
				NOT = { num_of_times_improved = 5 }
			}
		}
		trigger = {
			137 = {
				owned_by = ROOT
				renaissance = 100
				has_tax_building_trigger = yes
				num_of_times_improved = 5
			}
		}
		effect = {
			137 = {
				if = {
					limit = {
						ROOT = { religion = catholic }
					}
					add_cardinal = yes
				}
				add_permanent_province_modifier = {
					name = ragusa_basilica_san_biagio
					duration = -1
				}
			}
		}
	}

	ragusa_secure_home_trade = {
		icon = purely_for_commerce
		required_missions = { }
		position = 3
		trigger = {
			capital_scope = {
				custom_trigger_tooltip = {
					tooltip = THIS_HAS_MORE_TRADE_POWER_THAN_AREA
					area_for_scope_province = {
						type = all
						variable_arithmetic_trigger = {
							export_to_variable = {
								which = this_trade_power
								value = trigger_value:province_trade_power
							}
							export_to_variable = {
								which = prev_trade_power
								value = trigger_value:province_trade_power
								who = PREV
							}
							check_variable = { which = prev_trade_power which = this_trade_power }
						}
					}
				}
			}
		}
		effect = {
			add_years_of_income = 2
			define_advisor = {
				type = trader
				skill = 1
				religion = ROOT
				culture = ROOT
				cost_multiplier = 0.50
			}
		}
	}

	ragusa_mighty_fleet = {
		icon = renaissance_city
		required_missions = { ragusa_secure_home_trade }
		position = 4
		trigger = {
			num_of_admirals = 1
			OR = {
				navy_size_percentage = 1
				galley_fraction = 0.5
			}
		}
		effect = {
			add_country_modifier = {
				name = italian_minor_naval_propaganda
				duration = 5475
			}
			macedonia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			apulia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			142 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			163 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			3003 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			164 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			320 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			2348 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
			4700 = {
				if = {
					limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
				}
			}
		}
	}
	
	ragusa_republic_salerno = {
		icon = develop_naples
		required_missions = { ragusa_apulian_shores }
		position = 7
		provinces_to_highlight = {
			province_id = 2983
			NOT = { owned_by = ROOT }
		}
		trigger = {
			owns = 2983
		}
		effect = {
			2983 = {
				add_base_production = 3
				add_permanent_province_modifier = {
					name = nap_restore_republic
					duration = -1
				}
				if = {
					limit = { has_building = shipyard }
					remove_building = shipyard
					add_building_construction = {
						building = grand_shipyard
						speed = 0.5
						cost = 0
					}
				}
				else = {
					add_building_construction = {
						building = shipyard
						speed = 0.5
						cost = 0
					}
				}
			}
			liguria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			tuscany_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

ragusa_missions_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		tag = RAG
	}
	has_country_shield = yes
}

ragusa_missions_slot_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		has_country_flag = use_missions_expanded_missions_instead_of_paradox
		tag = RAG
	}
	has_country_shield = yes
}