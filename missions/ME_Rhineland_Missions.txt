#########
#Made by claivin for Missions Extended Mod, Adjusted by Stiopa for the Missions Extended mod
#########

RHN_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = RHN
	}
	has_country_shield = yes
	
	RHN_swabia = {
        icon = mission_landsknecht_soldier
        required_missions = { rhn_generic_unite_rhineland }
        position = 6
		provinces_to_highlight = {
			OR = {
				area = upper_swabia_area
				area = lower_swabia_area
				area = upper_rhineland_area
				area = alsace_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			upper_swabia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_swabia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			upper_rhineland_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			alsace_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			75 = {
				add_province_modifier = {
					name = RHN_Elsass_protection
					duration = -1
				}
			}
			1872 = {
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 15
					key = RHN_control_of_Swabia
				}
			}
			switzerland_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			romandie_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	RHN_bavaria = {
        icon = me_mission_bavaria_coat
        required_missions = { RHN_franconia RHN_swabia }
        position = 8
		provinces_to_highlight = {
			OR = {
				area = upper_bavaria_area
				area = lower_bavaria_area
				area = east_bavaria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			upper_bavaria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lower_bavaria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			east_bavaria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = RHN_bavaria_modifier
				duration = 9125
			}
		}
	}
	
	RHN_ruhrgebiet = {
        icon = industrialized_rhineland
        required_missions = { RHN_iron }
        position = 11
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_military_industry = {
        icon = industrialized_rhineland
        required_missions = { RHN_ruhrgebiet }
        position = 12
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
}

RHN_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = RHN
	}
	has_country_shield = yes
	
	RHN_franconia = {
        icon = mission_eastern_european_city
        required_missions = { rhn_generic_unite_rhineland }
        position = 7
		provinces_to_highlight = {
			area = franconia_area
			area = upper_franconia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			franconia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			upper_franconia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			lower_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			upper_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			67 = {
				add_province_modifier = {
					name = RHN_second_city_of_charlemagne
					duration = -1
				}
			}
		}
	}
	RHN_saxony = {
        icon = mission_eastern_european_city
        required_missions = { RHN_franconia RHN_bavaria RHN_lower_saxony }
        position = 9
		provinces_to_highlight = {
			area = franconia_area
			area = upper_franconia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			franconia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			upper_franconia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			lower_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			upper_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_bavaria_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			67 = {
				add_province_modifier = {
					name = RHN_second_city_of_charlemagne
					duration = -1
				}
			}
		}
	}
	
	RHN_iron = {
        icon = industrialized_rhineland
        required_missions = { RHN_workshops }
        position = 10
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_coal = {
        icon = industrialized_rhineland
        required_missions = { RHN_iron }
        position = 11
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_blast_furnaces = {
        icon = industrialized_rhineland
        required_missions = { RHN_manufactories }
        position = 12
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_leather = {
        icon = industrialized_rhineland
        required_missions = { RHN_military_industry }
        position = 13
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
}

RHN_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = RHN
	}
	has_country_shield = yes
	
	RHN_westphalia = {
        icon = mission_monarch_in_throne_room
        required_missions = { rhn_generic_unite_rhineland }
        position = 6
		provinces_to_highlight = {
			OR = {
				area = westphalia_area
				area = north_westphalia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			westphalia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_westphalia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			weser_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			westphalia_area = {
				add_province_modifier = {
					name = RHN_integration_of_westfalen
					duration = 9125
				}
			}
			north_westphalia_area = {
				add_province_modifier = {
					name = RHN_integration_of_westfalen
					duration = 9125
				}
			}
		}
	}
	RHN_lower_saxony = {
        icon = mission_have_two_subjects
        required_missions = { RHN_westphalia }
        position = 8
		provinces_to_highlight = {
			OR = {
				area = lower_saxony_area
				area = braunschweig_area
				area = weser_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			lower_saxony_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			weser_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			braunschweig_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = RHN_king_of_saxony
				duration = 9125
			}
			vorpommern_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mittelmark_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mecklenburg_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	RHN_workshops = {
        icon = industrialized_rhineland
        required_missions = { }
        position = 9
        trigger = {
            num_of_owned_provinces_with = {
				has_production_building_trigger = yes
				value = 10
			}
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_manufactories = {
        icon = industrialized_rhineland
        required_missions = { RHN_workshops}
        position = 11
        trigger = {
            num_of_owned_provinces_with = {
				has_manufactory_trigger = yes
				value = 10
			}
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	
	RHN_fill_the_land = {
        icon = industrialized_rhineland
        required_missions = { RHN_blast_furnaces }
        position = 13
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_center_of_europe = {
        icon = industrialized_rhineland
        required_missions = { RHN_fill_the_land RHN_jewellery RHN_leather }
        position = 14
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
}

RHN_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = RHN
	}
	has_country_shield = yes
	
	RHN_fine_german_print = {
        icon = industrialized_rhineland
        required_missions = { RHN_press }
        position = 7
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_copper_foundries = {
        icon = industrialized_rhineland
        required_missions = { RHN_workshops }
        position = 10
        trigger = {
            if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				83 = {
					OR = {
						trade_goods = brass
						trade_goods = bronze
						AND = {
							num_of_times_improved = 5
							has_trade_building_trigger = yes
						}
					}
				}
			}
			else = {
				83 = {
					num_of_times_improved = 5
					has_trade_building_trigger = yes
				}
			}
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
	
	RHN_optics = {
        icon = industrialized_rhineland
        required_missions = { RHN_copper_foundries }
        position = 11
		provinces_to_highlight = {
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				OR = {
					AND = {
						province_id = 1762
						OR = {
							NOT = { owned_by = ROOT }
							NOT = { development = 25 }
						}
					}
					trade_goods = optics
				}
			}
			else = {
				AND = {
					province_id = 1762
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { development = 25 }
					}
				}
			}
		}
        trigger = {
            if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				OR = {
					any_owned_province = {
						trade_goods = optics
					}
					1762 = {
						owned_by = ROOT
						development = 25
					}
				}
			}
			else = {
				1762 = {
					owned_by = ROOT
					development = 25
				}
			}
        }
        effect = {
            custom_tooltip = RHN_unlock_optic_event
			custom_tooltip = RHN_one_of_the_provinces
			tooltip = {
				add_province_modifier = {
					name = RHN_optics
					duration = -1
				}
			}
        }
    }
	
	RHN_moselle = {
        icon = industrialized_rhineland
        required_missions = { RHN_optics RHN_manufactories }
        position = 12
        trigger = {
			
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
			custom_tooltip = RHN_every_forest
			tooltip = {
				add_province_modifier = {
					name = RHN_supplying_the_industry
					duration = 10950
				}
			}
        }
    }
	
	RHN_jewellery = {
        icon = industrialized_rhineland
        required_missions = { RHN_moselle RHN_german_tin }
        position = 13
		provinces_to_highlight = {
			if = {
				limit = {
					ROOT = {
						is_expanded_mod_active = { mod = trade_goods }
					}
				}
				AND = {
					OR = {
						trade_goods = jewellery
						trade_goods = silver
						trade_goods = gold
						trade_goods = gems
						trade_goods = amber
						trade_goods = jade
						trade_goods = pearls
					}
					NOT = { owned_by = ROOT }
				}
			}
			else = {
				AND = {
					trade_goods = gold
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { development = 30 }
					}
				}
			}
		}
        trigger = {
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				jewellery = 1
			}
			else = {
				any_owned_province = {
					trade_goods = gold
					development = 30
				}
			}
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }
}
	
RHN_missions_5 = {
	slot = 5
	generic = yes
	ai = yes
	potential = {
		tag = RHN
	}
	has_country_shield = yes
	
	RHN_press = {
        icon = industrialized_rhineland
        required_missions = { }
        position = 6
        trigger = {
            has_institution = printing_press
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.2 }
        }
    }

    RHN_press_and_the_faith = {
        icon = mission_religious
        required_missions = { RHN_press }
        position = 8
        trigger = {
            has_institution = printing_press
            is_religion_enabled = protestant
            all_owned_province = {
                printing_press = 100
            }
            if = {
                limit = {
                    has_dlc = "Mandate of Heaven"
                }
                capital_scope = {
                    has_state_edict = edict_religion_enforced
                }
            }
            else = {
                capital_scope = {
                    development = 15
                    OR = {
                        has_building = courthouse
                        has_building = town_hall
                    }
                }
            }
        }
        effect = {
            country_event = { id = ME_Rhenish_Events.3 }
        }
    }
	
	RHN_zinc = {
        icon = industrialized_rhineland
        required_missions = { RHN_copper_foundries }
        position = 11
		provinces_to_highlight = {
			OR = {
				AND = {
					is_expanded_mod_active = { mod = trade_goods }
					province_id = 4768
					OR = {
						NOT = { num_of_times_improved = 3 }
						NOT = { owned_by = ROOT }
					}
				}
				AND = {
					province_id = 81
					OR = {
						NOT = { owned_by = ROOT }
						NOT = { num_of_times_improved = 10 }
					}
				}
			}
		}
        trigger = {
			81 = {
				num_of_times_improved = 10
			}
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				4768 = {
					num_of_times_improved = 3
				}
			}
        }
        effect = {
			country_event = { id = ME_Rhenish_Events.6 } #convert 81 into Zinc/Copper
			if = {
				limit = {
					is_expanded_mod_active = { mod = trade_goods }
				}
				4768 = {
					build_possible_manufactory_in_province = yes
				}
			}
			1757 = {
				add_core = yes
			}
        }
    }
	
	RHN_german_tin = {
        icon = industrialized_rhineland
        required_missions = { RHN_zinc }
        position = 12
		provinces_to_highlight = {
			province_id = 1757
			OR = {
				NOT = { owned_by = ROOT }
				local_autonomy = 50
				NOT = { has_trade_building_trigger = yes }
				NOT = { has_production_building_trigger = yes }
			}
		}
        trigger = {
            1757 = {
				owned_by = ROOT
				has_production_building_trigger = yes
				has_trade_building_trigger = yes
				NOT = { local_autonomy = 50 }
			}
        }
        effect = {
            1757 = {
				add_province_modifier = {
					name = RHN_sole_source_of_tin
					duration = -1
				}
			}
        }
    }
}
