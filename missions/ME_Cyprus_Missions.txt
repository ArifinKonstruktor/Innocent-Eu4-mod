CYP_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_wooden_wall = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_kingdom_cyprus
		}
		position = 2
		trigger = {
			num_of_galley = 10
			num_of_admirals = 1
		}
		effect = {
			add_sailors = 500
			add_country_modifier = {
				name = cyp_wooden_wall
				duration = 7120
			}
		}
	}
	
	cyp_trade_rivalry = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_wooden_wall
			cyp_aegean_trade
		}
		position = 4
		provinces_to_highlight = {
			OR = {
				province_id = 320
				province_id = 321
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			if = { 
				limit = {
					exists = VEN
				}
				num_of_galley = VEN
				NOT = {
					reverse_has_opinion = {
						who = VEN
						value = -50
					}
				}
				NOT = {
					has_opinion = {
						who = VEN
						value = -50
					}
				}
			}
			321 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			320 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_treasury = 300
			320 = {
				add_province_modifier = {
					name = cyp_victory_cyprus
					duration = -1
				}
			}
			321 = {
				add_province_modifier = {
					name = cyp_victory_cyprus
					duration = -1
				}
			}
		}
	}

	cyp_aegean_bases = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_trade_rivalry
		}
		position = 5
		provinces_to_highlight = {
			OR = {
				province_id = 320
				province_id = 321
				province_id = 2348
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { development = 10 }
			}
		}
		trigger = {
			if = { 
				limit = {
					exists = VEN
				}
				is_rival = VEN
			}
			164 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
			320 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
			2348 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
		}
		effect = {
			164 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
			320 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
			2348 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
		}
	}
}

CYP_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_aegean_trade = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_wooden_wall 
		}
		position = 3
		provinces_to_highlight = {
			province_id = 320
			OR = {
				NOT = { owned_by = ROOT }
				AND = {
					NOT = { has_building = marketplace }
					NOT = { has_building = trade_depot }
					NOT = { has_building = stock_exchange }
				}
			}
		}
		trigger = {
			320 = {
				owned_by = ROOT
				OR = {
					has_building = marketplace
					has_building = trade_depot
					has_building = stock_exchange
				}
			}
			151 = { #Constantinople
				trade_share = {
					country = ROOT
					share = 10
				}
			}
		}
		effect = {
			320 = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
					center_of_trade = 2
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 2 }
					}
					add_center_of_trade_level = 2
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
				add_base_tax = 2
				add_base_production = 1
				add_base_manpower = 1
			}
		}
	}

	cyp_trade_constantinople = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_trade_rivalry 
			cyp_aegean_trade
		}
		position = 5
		provinces_to_highlight = {
			area = aegean_archipelago_area
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { development = 15 }
			}
		}
		trigger = {
			num_of_light_ship = 25
			aegean_archipelago_area = {
				type = all
				owned_by = ROOT
				development = 15
			}
			151 = { #Constantinople
				trade_share = {
					country = ROOT
					share = 10
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = cyp_aegean_merchant_flag
				duration = 7300
			}
			random_owned_province = {
				limit = {
					area = aegean_archipelago_area
					development = 15
					province_has_center_of_trade_of_level = 1
					NOT = { province_has_center_of_trade_of_level = 3 }
				}
				add_center_of_trade_level = 1
			}
			151 = { #Constantinople
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 20
					key = cyp_mercantile_fleet
				}
			}
		}
	}
}

CYP_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_kingdom_cyprus = {
		icon = mission_assemble_an_army
		required_missions = { }
		position = 1
		trigger = {
			OR = {
				army_size_percentage = 1
				navy_size_percentage = 1
				reverse_has_opinion = {
					who = PAP
					value = 100
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						army_size_percentage = 1
						navy_size_percentage = 1
					}
				}
				add_country_modifier = {
					name = cyp_reinstated_crusading_army
					duration = 7600
				}
				2302 = {
					if = {
						limit = {
							NOT = { owned_by = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				327 = {
					if = {
						limit = {
							NOT = { owned_by = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				
			}
			else = {
				PAP = {
					country_event = { id = ME_Cyprus_Events.11 }
				}
				320 = {
					if = {
						limit = {
							NOT = { owned_by = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}

	cyp_landing_anatolia = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_kingdom_cyprus
		}
		position = 2
		provinces_to_highlight = {
			OR = {
				province_id = 2302
				province_id = 327
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			2302 = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
			327 = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		trigger = {
			OR = {
				2302 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				327 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					religion = catholic
				}
				add_papal_influence = 10
			}
			else_if = {
				limit = {
					religion = orthodox
				}
				add_patriarch_authority = 5
			}
			add_country_modifier = {
				name = cyp_heathen_persecution
				duration = 3650
			}
			2302 = {
				change_culture = ROOT
			}
			327 = {
				change_culture = ROOT
			}
		}
	}

	cyp_mercenaries = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_landing_anatolia 
		}
		position = 3
		trigger = {
			num_of_mercenaries = 5
			mil_power = 100
		}
		effect = {
			add_country_modifier = {
				name = cyp_integrated_mercenaries
				duration = 18250
			}
		}
	}

	cyp_crusade_anatolia = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_mercenaries
			cyp_modernize_knights
		}
		position = 4
		trigger = {
			num_of_owned_provinces_with = {
				value = 7
				region = anatolia_region
			}
		}
		effect = {
			add_country_modifier = {
				name = cyp_victory_turks
				duration = 10950
			}
		}
	}

}

CYP_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_knights_hospitallier = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_kingdom_cyprus
		}
		position = 2
		provinces_to_highlight = {
			province_id = 320
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			ROOT = {
				NOT = {
					alliance_with = KNI
					reverse_has_opinion = {
						who = KNI
						value = 100
					}
					total_development = KNI
					KNI = {
						is_at_war = no
						is_subject = no
					}
				}
			}
		}
		trigger = {
			OR = {
				AND = {
					alliance_with = KNI
					reverse_has_opinion = {
						who = KNI
						value = 100
					}
					total_development = KNI
					KNI = {
						is_at_war = no
						is_subject = no
					}
				}
				320 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					alliance_with = KNI
					reverse_has_opinion = {
						who = KNI
						value = 100
					}
					total_development = KNI
					KNI = {
						is_at_war = no
						is_subject = no
					}
				}
				KNI = {
					country_event = { id = ME_Cyprus_Events.13 }
				}
			}
			else = {
				add_country_modifier = {
					name = cyp_subdued_knights
					duration = -1
				}
			}
		}
	}

	cyp_modernize_knights = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_knights_hospitallier 
		}
		position = 3
		trigger = {
			army_size = 15
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				army_professionalism = 0.10
			}
			else = {
				army_tradition = 35
			}
		}
		effect = {
			add_army_tradition = 20
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				add_country_modifier = {
					name = cyp_reformed_crusader_knights_CoC
					duration = 10950
				}
			}
			else = {
				add_country_modifier = {
					name = cyp_reformed_crusader_knights_moral
					duration = 10950
				}
			}
		}
	}
}