CYP_slot_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_wooden_wall = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_kingdom_cyprus
		}
		position = 2
		trigger = {
			num_of_galley = 10
			num_of_admirals = 1
		}
		effect = {
			add_country_modifier = {
				name = cyp_wooden_wall
				duration = 7120
			}
			add_sailors = 500
		}
	}
	
	cyp_trade_rivalry = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_wooden_wall
			cyp_aegean_trade
		}
		position = 4
		trigger = {
			if = { 
				limit = {
					exists = VEN
				}
				num_of_galley = VEN
			}
			NOT = {
				reverse_has_opinion = {
					who = VEN
					value = -50
				}
			}
			NOT = {
				has_opinion = {
					who = VEN
					value = -50
				}
			}
			321 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			320 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			320 = {
				add_province_modifier = {
					name = cyp_victory_cyprus
					duration = -1
				}
			}
			321 = {
				add_province_modifier = {
					name = cyp_victory_cyprus
					duration = -1
				}
			}
			add_treasury = 300
		}
	}

	cyp_aegean_bases = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_trade_rivalry
		}
		position = 5
		trigger = {
			if = { 
				limit = {
					exists = VEN
				}
				is_rival = VEN
			}
			164 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
			320 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
			2348 = {
				country_or_non_sovereign_subject_holds = ROOT
				development = 10
			}
		}
		effect = {
			164 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
			320 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
			2348 = {
				add_province_modifier = {
					name = cyp_trade_naval_bases
					duration = -1
				}
			}
		}
	}

}

CYP_slot_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_aegean_trade = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_wooden_wall 
		}
		position = 3
		trigger = {
			320 = {
				has_building = marketplace
			}
			151 = { #Constantinople
				trade_share = {
					country = ROOT
					share = 10
				}
			}
		}
		effect = {
			320 = {
				center_of_trade = 2
				add_base_tax = 2
				add_base_production = 1
				add_base_manpower = 1
			}
		}
	}

	cyp_trade_constantinople = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_trade_rivalry 
			cyp_aegean_trade
		}
		position = 5
		trigger = {
			num_of_light_ship = 25
			any_province = {
				limit = {
					area = aegean_archipelago_area
				}
				owned_by = ROOT
				development = 15
			}
			151 = { #Constantinople
				trade_share = {
					country = ROOT
					share = 10
				}
			}
		}
		effect = {
			random_province = {
				limit = {
					owned_by = ROOT
					area = aegean_archipelago_area
					development = 15
				}
				center_of_trade = 1
			}
			151 = { #Constantinople
				add_trade_modifier = {
					who = ROOT
					duration = 7300
					power = 20
					key = cyp_mercantile_fleet
				}
			}
			add_country_modifier = {
				name = cyp_aegean_merchant_flag
				duration = 7300
			}
		}
	}
}

CYP_slot_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_kingdom_cyprus = {
		icon = mission_assemble_an_army
		required_missions = { }
		position = 1
		trigger = {
			OR = {
				OR = {
					army_size_percentage = 1
					navy_size_percentage = 1
				}
				reverse_has_opinion = {
					who = PAP
					value = 100
				}
			}
		}
		effect = {
			if = {
				limit = {
					OR = {
						army_size_percentage = 1
						navy_size_percentage = 1
					}
				}
				add_country_modifier = {
					name = cyp_reinstated_crusading_army
					duration = 7600
				}
				2302 = {
					if = {
						limit = {
							NOT = { 
								owned_by = ROOT 
							}
							NOT = { 
								is_core = ROOT 
							}
						}
						add_permanent_claim = ROOT
					}
				}
				327 = {
					if = {
						limit = {
							NOT = { 
								owned_by = ROOT 
							}
							NOT = { 
								is_core = ROOT 
							}
						}
						add_permanent_claim = ROOT
					}
				}
				
			}
			else_if = {
				limit = {
					reverse_has_opinion = {
						who = PAP
						value = 100
					}
				}
				PAP = {
					country_event = { 
						id = ME_Papal_State_Events.10
					}
				}
				320 = {
					if = {
						limit = {
							NOT = { 
								owned_by = ROOT 
							}
							NOT = { 
								is_core = ROOT 
							}
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}

	cyp_landing_anatolia = {
		icon = mission_assemble_an_army
		required_missions = {
			cyp_kingdom_cyprus
		}
		position = 2
		trigger = {
			OR = {
				2302 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				327 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = cyp_heathen_persecution
				duration = 3650
			}
			2302 = {
				change_culture = ROOT
			}
			327 = {
				change_culture = ROOT
			}
			if = {
				limit = {
					religion = catholic
				}
				add_papal_influence = 10
			}
			else_if = {
				limit = {
					religion = orthodox
				}
				add_patriarch_authority = 5
			}
		}
	}

	cyp_mercenaries = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_landing_anatolia 
		}
		position = 3
		trigger = {
			num_of_mercenaries = 5
			mil_power = 100
		}
		effect = {
			add_country_modifier = {
				name = cyp_integrated_mercenaries
				duration = 18250
			}
		}
	}

	cyp_crusade_anatolia = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_mercenaries
			cyp_modernize_knights
		}
		position = 4
		trigger = {
			num_of_owned_provinces_with = {
				value = 7
				region = anatolia_region
			}
		}
		effect = {
			add_country_modifier = {
				name = cyp_victory_turks
				duration = 10950
			}
		}
	}

}

CYP_slot_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = CYP
	}
	has_country_shield = yes
	
	cyp_knights_hospitallier = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_kingdom_cyprus
		}
		position = 2
		trigger = {
			OR = {
				OR = {
					alliance_with = KNI
					reverse_has_opinion = {
						who = KNI
						value = 100
					}
					total_development = KNI
					KNI = {
						NOT = {
							is_at_war = yes
						}
					}
					KNI = {
						NOT = {
							is_subject = yes 
						}
					}
				}
				320 = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
		}
		effect = {
			if = {
				limit = {
					alliance_with = KNI
				}
				KNI = {
					country_event = { 
						id = ME_Knights_Events.2
					}
				}
			}
			else_if = {
				limit = {
					320 = {
						owned_by = ROOT
					}
				}
				add_country_modifier = {
					name = cyp_subdued_knights
					duration = -1
				}
			}
		}
	}

	cyp_modernize_knights = {
		icon = mission_assemble_an_army
		required_missions = { 
			cyp_knights_hospitallier 
		}
		position = 3
		trigger = {
			army_size = 15
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				army_professionalism = 0.10
			}
			else = {
				army_tradition = 35
			}
		}
		effect = {
			add_army_tradition = 20
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				custom_tooltip = CYP_REFORMED_COC_TOOLTIP
				hidden_effect = {
					add_country_modifier = {
						name = cyp_reformed_crusader_knights_CoC
						duration = 10950
					}
				}
			}
			else = {
				custom_tooltip = CYP_REFORMED_MOR_TOOLTIP
				hidden_effect = {
					add_country_modifier = {
						name = cyp_reformed_crusader_knights_moral
						duration = 10950
					}
				}
			}
			hidden_effect = {
				add_country_modifier = {
					name = cyp_reformed_crusader_knights
					duration = 10950
				}
			}
		}
	}
}