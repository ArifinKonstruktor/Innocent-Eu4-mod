######
#Made by claivin for Missions Expanded Mod
######

ME_generic_army = {
    slot = 1
	generic = yes
	ai = yes
	potential = {
		NOT = { me_unique_missions_also_use_generic_missions = yes }
	}	

	ME_generic_army_build_army_mission = { #copied form vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1
		trigger = {
			army_size_percentage = 1
		}
		effect = { 
			add_country_modifier = {
				name = "thriving_arms_industry"
				duration = 9125
			}
		}
	}
	ME_generic_army_capital_fort = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_army_build_army_mission }
		position = 2
		trigger = {
			capital_scope = {
				fort_level = 3
				base_manpower = 5
			}
		}
		effect = { 
			capital_scope = {
				add_province_modifier = {
					name = ME_generic_fort
					# +25% fort defense
					# +10% garrison
					duration = -1
				}
			}
		}
	}
	ME_generic_army_reserves = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_army_capital_fort }
		position = 3
		trigger = {
			max_manpower = 75
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_generals
				# -25% general_cost
				duration = 3650
			}
			create_general = {
				tradition = 75
			}
		}
	}
	ME_generic_army_professionalism = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_army_reserves }
		position = 4
		trigger = {
			IF = {
				limit = { has_dlc = "Cradle of Civilization"}
				army_professionalism = 0.60
			}
			else = {
				army_tradition = 75
			}
		}
		effect = {
			add_mil_power = 150
			add_country_modifier = {
				name = ME_generic_mil_tech
				#-10% mil tech cost
				duration = 18250
			}
		}
	}
	ME_generic_army_buildings = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_army_professionalism }
		position = 5
		trigger = {
			num_of_owned_provinces_with = {
				value = 20
				or = {
					has_building = barracks
					has_building = training_fields
				}
			}
			num_of_owned_provinces_with = {
				value = 10
				or = {
					has_building = regimental_camp
					has_building = conscription_center
				}
			}
			land_forcelimit = 100
		}
		effect = {
			add_country_modifier = {
				name = ME_general_grand_army
				#-10% reinforce_cost_modifier
				#-5% land_maintenance_modifier
				duration = -1
			}
		}
	}
}

ME_generic_diplomacy = {
    slot = 2
	generic = yes
	ai = yes
	potential = {
		NOT = { me_unique_missions_also_use_generic_missions = yes }
	}
	
	ME_generic_diplomacy_alliances = {
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1
		trigger = {
			calc_true_if = {
				all_country = {
					or = {
						alliance_with = ROOT
						is_subject_of = ROOT
					}
					has_opinion = {
						who = ROOT
						value = 150
					}
				}
				amount = 2
			}
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_alliances
				#+1 diplomatic_reputation
				#+15% improve_relation_modifier
				duration = 9125
			}
		}
	}
	ME_generic_diplomacy_subject = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_diplomacy_alliances }
		position = 2
		trigger = {
			calc_true_if = {
				all_subject_country = {
					has_opinion = {
						who = ROOT
						value = 150
					}
				}
				amount = 2
			}
		}
		effect = { 
			IF = {
				limit = { NOT = { has_institution = feudalism } }
				capital_scope = {
					add_province_modifier = {
						name = ME_generic_feudalism
						#+0.83 institution/month
						duration = 3650
					}
				}
			}
			every_subject_country = {
				add_trust = {
					who = ROOT
					value = 25
					mutual = yes
				}
			}
			add_dip_power = 100
		}
	}
	ME_generic_diplomacy_great_power = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_diplomacy_subject }
		position = 3
		trigger = {
			IF = {
				limit = { has_dlc = "Rights of Man" }
				is_great_power = yes
			}
			IF = {
				limit = { has_dlc = "Common Sense" }
				government_rank = 3
			}
			IF = {
				limit = {
					NOT = { has_dlc = "Rights of Man" }
					NOT = { has_dlc = "Common Sense" }
				}
				total_development = 1000
			}
		}
		effect = {
			add_legitimacy = 100
			IF = {
				limit = { dip = 6 }
				add_dip_power = 200
			}
			else = {
				change_dip = 1
			}
		}
	}
	ME_generic_diplomacy_multicultural = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_diplomacy_great_power }
		position = 4
		trigger = {
			has_unified_culture_group = yes
			num_accepted_cultures = 4
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_cultures
				#+1 num_accepted_cultures 
				duration = -1
			}
		}
	}
	ME_generic_diplomacy_world_power = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_diplomacy_multicultural }
		position = 5
		trigger = {
			prestige = 100
			IF = {
				limit = { has_dlc = "Rights of Man" }
				great_power_rank = 1
			}
			any_owned_province = {
				continent = asia
				IF = {
					limit = { has_dlc = "Dharma" }
					province_has_center_of_trade_of_level = 2
				}
				else = { #cant upgrade w/o dharma
					province_has_center_of_trade_of_level = 1
				}
			}
			any_owned_province = {
				continent = africa
				IF = {
					limit = { has_dlc = "Dharma" }
					province_has_center_of_trade_of_level = 2
				}
				else = { #cant upgrade w/o dharma
					province_has_center_of_trade_of_level = 1
				}
			}
			any_owned_province = {
				continent = europe
				IF = {
					limit = { has_dlc = "Dharma" }
					province_has_center_of_trade_of_level = 2
				}
				else = { #cant upgrade w/o dharma
					province_has_center_of_trade_of_level = 1
				}
			}
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_world_power
				#+10% trade efficiency
				#+10% global trade power
				duration = -1
			}
		}
	}
}

ME_generic_expansion = {
    slot = 3
	generic = yes
	ai = yes
	potential = {
		NOT = { me_unique_missions_also_use_generic_missions = yes }
	}

	ME_generic_expansion_grown_fifty = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1
		trigger = {
			grown_by_development = 10
		}
		effect = { 
			capital_scope = {
				area = {
					limit = { owned_by = ROOT }
					add_province_modifier = {
						name = "growth_of_capital"
						duration = 9125 #25 years
					}
				}
				
				#grants claims on all provinces in capital state + adjacent states
				area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			every_province  = {
				limit = { 
					culture = ROOT
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			
		}
	}
	ME_generic_expansion_home_areas = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_expansion_grown_fifty }
		position = 2
		trigger = { #owns all provicnes of primary culture
			all_province = {
				OR = {
					AND = {
						culture = ROOT
						is_core = ROOT
					}
					NOT = { culture = ROOT }
				}
			}
		}
		effect = {
			capital_scope = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			IF = {
				limit = { stability = 1 }
				add_adm_power = 100
			}
			else = {
				add_stability = 1
			}
		}
	}
	ME_generic_expansion_secure_border = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_expansion_home_areas }
		position = 3
		trigger = {
			num_of_owned_provinces_with = {
				value = 4
				fort_level = 2
			}
			grown_by_states = 8
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_border
				#-5% fort_maintenance
				#-20% rival_border_fort_maintenance
				duration = 18250
			}
		}
	}
	ME_generic_expansion_region = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_expansion_secure_border }
		position = 4
		trigger = {
			IF = {
				limit = { has_dlc = "Rights of Man" }
				is_great_power = yes
			}
			
			#no rivals own provinces in your home region
			capital_scope = {
				region_for_scope_province = {
					any_rival_country = {
						NOT = { owned_by = THIS }
					}
				}
			}
		}
		effect = { #claims on home region
			capital_scope = {
				region_for_scope_province = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
	ME_generic_expansion_region_consolidated = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_expansion_region }
		position = 5
		trigger = {
			capital_scope = {
				region_for_scope_province = {
					type = all
					OR = {
						owned_by = ROOT
						is_empty = yes
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = ME_generic_region
				#-5% warscore cost
				duration = -1
			}
		}
	}
}

ME_generic_economy = {
    slot = 4
	generic = yes
	ai = yes
	potential = {
		NOT = { me_unique_missions_also_use_generic_missions = yes }
	}
	
	ME_generic_economy_income = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1
		trigger = {
			share_of_starting_income = 1.5 
		}
		effect = {
			add_country_modifier = {
				name = "growing_economy"
				duration = 9125 #25 years
			}
		}
	}
	ME_generic_economy_specialty = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_economy_income }
		position = 2
		trigger = {
			any_owned_province = {
				base_production = 10
				is_prosperous = yes
				has_building = workshop
			}
		}
		effect = {
			random_owned_province = {
				limit = { 
					base_production = 10
					is_prosperous = yes
					has_building = workshop
				}
				add_province_modifier = {
					name = ME_generic_specialty
					#+1 goods produced
					duration = -1
				}
			}
		}
	}
	ME_generic_economy_buildings = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_economy_specialty }
		position = 3
		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				or = {
					has_building = temple
					has_building = cathedral
				}
			}
			num_of_owned_provinces_with = {
				value = 10
				or = {
					has_building = workshop
					has_building = counting_house
				}
			}
		}
		effect = {
			add_adm_power = 50
			add_country_modifier = {
				name = "building_spree"
				duration = 9125
			}
		}
	}
	ME_generic_economy_treasury = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_economy_buildings }
		position = 4
		trigger = {
			treasury = 2000 
		}
		effect = {
			add_country_modifier = {
				name = "strong_treasury"
				duration = 9125
			}
		}
	}
	ME_generic_economy_manufactories = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_economy_treasury }
		position = 5
		trigger = {
			calc_true_if = {
				all_owned_province = {
					OR = {
						has_building = mills
						has_building = farm_estate
						has_building = tradecompany
						has_building = plantations
						has_building = textile
						has_building = weapons
						has_building = wharf
						has_building = furnace
					}
				}
				amount = 20
			}
		}
		effect = {
			add_country_modifier = {
				name = ME_generic_industrialization
				#+5% goods produced
				duration = -1
			}
		}
	}
}

ME_generic_navy = {
    slot = 5
	generic = yes
	ai = yes
	potential = {
		NOT = { me_unique_missions_also_use_generic_missions = yes }
	}
	
	ME_generic_navy_build_navy_mission = {
		icon = mission_build_up_to_force_limit
		required_missions = { }
		position = 1
		trigger = {
			navy_size_percentage = 1
		}
		effect = { 
			add_country_modifier = { #from vanilla
				name = "naval_enthusiasm_mission"
				duration = 9125
			}
		}
	}
	ME_generic_navy_domestic_ambitions = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_navy_build_navy_mission }
		position = 2
		trigger = {
			mercantilism = 25
		}
		effect = { 
			add_country_modifier = {
				name = ME_generic_trade
				#+15% global_prov_trade_power_modifier
				duration = 9125
			}
		}
	}
	ME_generic_navy_home_trade = { #copied from vanilla
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_navy_domestic_ambitions }
		position = 3
		trigger = {
			home_trade_node = {
				trade_share = {
					country = ROOT
					share = 75
				}
			}
		}
		effect = { 
			hidden_effect = {
				home_trade_node_effect_scope = {
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
						}
						save_event_target_as = reward_province
					}
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
							is_capital = yes
						}
						save_event_target_as = reward_province
					}
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
							development = CAPITAL
							is_capital = no
						}
						save_event_target_as = reward_province
					}
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
							development = CAPITAL
							is_capital = no
							development = 20
						}
						save_event_target_as = reward_province
					}
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
							development = CAPITAL
							is_capital = no
							development = 25
						}
						save_event_target_as = reward_province
					}
					random_trade_node_member_province = {
						limit = {
							owned_by = ROOT
							development = CAPITAL
							is_capital = no
							development = 30
						}
						save_event_target_as = reward_province
					}
				}
			}
			IF = {
				limit = { has_saved_event_target = reward_province }
				event_target:reward_province = {
					add_province_modifier = {
						name = "dominant_trade_hub"
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = dominant_home_node_reward_tooltip
			}
		}
	}
	ME_generic_navy_colonial_ambitions = { #copied from age objective
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_navy_home_trade }
		position = 4
		trigger = {
			or = {
				num_of_colonists = 1
				any_owned_province = {
					NOT = { provinces_on_capital_continent_of = ROOT }
				}
			}
			IF = {
				limit = {
					capital_scope = {
						OR = {
							continent = europe
							continent = asia
							continent = africa
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = obj_discover_america_tooltip
					OR = {
						north_america = { has_discovered = ROOT }
						south_america = { has_discovered = ROOT }
						new_world = { has_discovered = ROOT }
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = me_has_discovered_old_world
					OR = {
						europe = { has_discovered = ROOT }
						asia = { has_discovered = ROOT }
						africa = { has_discovered = ROOT }
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = ME_generic_colonial_ambitions
				#+10 settler growth
				#+2.5% growth chance
				duration = 36500
			}
		}
	}
	ME_generic_navy_power = {
		icon = mission_build_up_to_force_limit
		required_missions = { ME_generic_navy_colonial_ambitions }
		position = 5
		trigger = {
			all_country = {
				NOT = { navy_size = ROOT }
			}
		}
		effect = {
			IF = {
				limit = { has_dlc = "Dharma" }
				add_country_modifier = {
					name = ME_generic_naval_power
					#-25% upgrade CoT cost
					duration = -1
				}
			}
			else = {
				add_country_modifier = {
					name = ME_generic_naval_power_alt
					#-10% naval_maintenance_modifier
					duration = -1
				}
			}
		}
	}
}