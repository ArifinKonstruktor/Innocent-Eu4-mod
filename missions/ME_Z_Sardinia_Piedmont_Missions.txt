SardiniPiedmont_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPI
			AND = {
				OR = {
					tag = SAR
					tag = SAV
				}
				has_country_flag = spi_without_spi
			}
			OR = {
				has_country_flag = spi_without_spi
				tag = SPI
			}
			#tag = ITA
		}
		OR = {
			AND = {
				was_tag = SAV
				OR = {
					NOT = { has_dlc = "Emperor" }
					AND = {
						has_dlc = "Emperor"
						has_country_flag = use_missions_expanded_missions_instead_of_paradox
					}
				}
			}
			was_tag = SAR
		}
	}
	has_country_shield = yes

	spi_matter_balance = {
		icon = counter_reformation
		position = 9
		required_missions = {
		}
		trigger = {
			if = {
				limit = {
					religion_group = christian
					exists = PAP
				}
				PAP = {
					OR = {
						has_opinion = {
							who = ROOT
							value = 125
						}
						NOT = {
							has_opinion = {
								who = ROOT
								value = -100
							}
						}
					}
				}
			}
			else = {
				OR = {
					humanist_ideas = 1
					religious_ideas = 1
				}
			}
		}
		effect = {
			custom_tooltip = SPI_cassa_TT
			tooltip = {
				add_country_modifier = {
					name = spi_cassa_ecclesiastica
					duration = 12775
				}
			}
			custom_tooltip = SPI_blessing_TT
			tooltip = {
				add_country_modifier = {
					name = spi_papal_blessing
					duration = 7300
				}
			}
			custom_tooltip = SPI_pious_TT
			tooltip = {
				add_country_modifier = {
					name = spi_pious_ruling
					duration = 9125
				}
			}
			custom_tooltip = SPI_progressive_TT
			tooltip = {
				add_country_modifier = {
					name = spi_progressive_society
					duration = 9125
				}
			}
			hidden_effect = {
				if = {
					limit = {
						PAP = {
							NOT = {
								has_opinion = {
									who = ROOT
									value = -100
								}
							}
						}
					}
					add_country_modifier = {
						name = spi_cassa_ecclesiastica
						duration = 12775
					}
					if = {
						limit = {
							has_estate = estate_church
						}
						change_estate_land_share = {
							estate = estate_church
							share = -100
						}
					}
				}
				else_if = {
					limit = {
						PAP = {
							has_opinion = {
								who = ROOT
								value = 125
							}
						}
					}
					add_country_modifier = {
						name = spi_papal_blessing
						duration = 7300
					}
				}
				else = {
					if = {
						limit = {
							religious_ideas = 1
						}
						add_country_modifier = {
							name = spi_pious_ruling
							duration = 9125
						}
					}
					else = {
						add_country_modifier = {
							name = spi_progressive_society
							duration = 9125
						}
					}
				}
			}
		}
	}

	spi_education_universities = {
		icon = found_the_vatican_library
		required_missions = {
			spi_matter_balance
			spi_artistical_resurgence
		}
		position = 11
		trigger = {
			2986 = {
				owned_by = ROOT
				has_building = university
			}
			103 = {
				owned_by = ROOT
				has_building = university
			}
		}
		effect = {
			add_country_modifier = {
				name = spi_public_education
				duration = 5475
			}
			define_advisor = {
				type = natural_scientist
				skill = 3
				cost_multiplier = 0.50
				name = "Cosma Excarcioni"
			}
		}
	}

	spi_imperial_powerness = {
		icon = up_the_adige
		required_missions = {
			spi_northern_meddling
		}
		position = 12
		trigger = {
			if = {
				limit = {
					hre_size = 1
				}
				OR = {
					has_won_war_against = {
						who = emperor
					}
					total_development = emperor
					has_won_war_against = {
						who = HAB
					}
					total_development = HAB
				}
			}
			else = {
				OR = {
					has_won_war_against = {
						who = HAB
					}
					total_development = HAB
				}
			}
			if = {
				limit = {
					exists = FRA
				}
				OR = {
					has_won_war_against = {
						who = FRA
					}
					total_development = FRA
				}
			}
		}
		effect = {
			add_prestige = 15
			add_army_tradition = 10
		}
	}

	spi_barbarians_italy = {
		icon = up_the_adige
		required_missions = {
			spi_imperial_powerness
			spi_lombardo_veneto
		}
		position = 13
		trigger = {
			any_province = {
				OR = {
					area = piedmont_area
					area = lombardy_area
					area = po_valley_area
					area = venetia_area
					area = emilia_romagna_area
					area = liguria_area
				}
				owner = {
					culture_group = latin
					is_subject = no
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = spi_dismanter_empires
				duration = 7300
			}
		}
	}
}

SardiniPiedmont_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPI
			AND = {
				OR = {
					tag = SAR
					tag = SAV
				}
				has_country_flag = spi_without_spi
			}
			OR = {
				has_country_flag = spi_without_spi
				tag = SPI
			}
			#tag = ITA
		}
		OR = {
			AND = {
				was_tag = SAV
				OR = {
					NOT = { has_dlc = "Emperor" }
					AND = {
						has_dlc = "Emperor"
						has_country_flag = use_missions_expanded_missions_instead_of_paradox
					}
				}
			}
			was_tag = SAR
		}
	}
	has_country_shield = yes

	spi_artistical_resurgence = {
		icon = sponsor_the_arts
		required_missions = {
			spi_mountain_islands
		}
		position = 10
		trigger = {
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
			
		}
		effect = {
			add_country_modifier = {
				name = spi_resurgence
				duration = 3650
			}
		}
	}

	spi_northern_meddling = {
		icon = a_show_of_strength
		required_missions = {
			spi_regia_armata_sarda
		}
		position = 11
		trigger = {
			if = {
				limit = {
					exists = MLO
				}
				MLO = {
					NOT = {
						army_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
			if = {
				limit = {
					exists = VEN
				}
				VEN = {
					NOT = {
						army_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
			if = {
				limit = {
					exists = LVN
				}
				LVN = {
					NOT = {
						army_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
		}
		effect = {
			if = {
				limit = {
					exists = VEN
				}
				add_casus_belli = {
					type = cb_italy_humiliation_rivals
					target = VEN
				}
			}
			if = {
				limit = {
					exists = MLO
				}
				add_casus_belli = {
					type = cb_italy_humiliation_rivals
					target = MLO
				}
			}
			if = {
				limit = {
					exists = LVN
				}
				add_casus_belli = {
					type = cb_italy_humiliation_rivals
					target = LVN
				}
			}
			if = {
				limit = {
					exists = HAB
				}
				add_casus_belli = {
					type = cb_italy_humiliation_rivals
					target = HAB
				}
			}
			if = {
				limit = {
					exists = FRA
				}
				add_casus_belli = {
					type = cb_italy_humiliation_rivals
					target = FRA
				}
			}
		}
	}

	spi_lombardo_veneto = {
		icon = king_of_kings
		required_missions = {
			spi_northern_meddling
		}
		position = 12
		trigger = {
			owns_core_province = 104
			owns_core_province = 112
			if = {
				limit = {
					exists = MLO
				}
				OR = {
					MLO = {
						NOT = {
							any_owned_province = {
								region = italy_region
							}
						}
					}
					overlord_of = MLO
				}
			}
			if = {
				limit = {
					exists = VEN
				}
				OR = {
					VEN = {
						NOT = {
							any_owned_province = {
								region = italy_region
							}
						}
					}
					overlord_of = VEN
				}
			}
			if = {
				limit = {
					exists = LVN
				}
				OR = {
					LVN = {
						NOT = {
							any_owned_province = {
								region = italy_region
							}
						}
					}
					overlord_of = LVN
				}
			}
		}
		effect = {
			hidden_effect = {
				add_country_modifier = {
					name = spi_lombardo_veneto
					duration = -1
				}
			}
			add_accepted_culture = lombard
			add_accepted_culture = venetian
		}
	}
}

SardiniPiedmont_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPI
			AND = {
				OR = {
					tag = SAR
					tag = SAV
				}
				has_country_flag = spi_without_spi
			}
			OR = {
				has_country_flag = spi_without_spi
				tag = SPI
			}
			#tag = ITA
		}
		OR = {
			AND = {
				was_tag = SAV
				OR = {
					NOT = { has_dlc = "Emperor" }
					AND = {
						has_dlc = "Emperor"
						has_country_flag = use_missions_expanded_missions_instead_of_paradox
					}
				}
			}
			was_tag = SAR
		}
	}
	has_country_shield = yes
	
	spi_mountain_islands = {
		icon = develop_the_po_valley
		required_missions = {
			sav_dual_cities
			sar_dual_cities
		}
		position = 9
		provinces_to_highlight = {
			OR = {
				area = piedmont_area
				area = liguria_area
				area = corsica_sardinia_area
			}
		}
		trigger = {
			total_development = 350
			piedmont_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					OR = {
						prosperity = 50
						NOT = { devastation = 1 }
					}
				}
				else = {
					NOT = { devastation = 1 }
				}
			}
			liguria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					OR = {
						prosperity = 50
						NOT = { devastation = 1 }
					}
				}
				else = {
					NOT = { devastation = 1 }
				}
			}
			corsica_sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				if = {
					limit = {
						has_dlc = "Mandate of Heaven"
					}
					OR = {
						prosperity = 50
						NOT = { devastation = 1 }
					}
				}
				else = {
					NOT = { devastation = 1 }
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = spi_fusione_perfetta
				duration = -1
			}
			if = {
				limit = {
					OR = {
						overlord_of = SAR
						overlord_of = SAV
					}
				}
				country_event = {
					id = ME_Sardinia_Piedmont_Events.1
				}
			}
		}
	}

	spi_regia_armata_sarda = {
		icon = establish_a_standing_army
		position = 10
		required_missions = {
			spi_mountain_islands
		}
		trigger = {
			OR = {
				army_size_percentage = 1
				AND = {
					army_size_percentage = 0.75
					manpower_percentage = 0.5
				}
			}
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				OR = {
					army_tradition = 50
					army_professionalism = 0.33
				}
			}
			else = {
				army_tradition = 50
			}
		}
		effect = {
			103 = {
				add_province_modifier = {
					name = spi_regia_accademia_militare
					duration = -1
				}
			}
			add_country_modifier = {
				name = spi_italian_unifier
				duration = -1
			}
			italy_region = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			country_event = {
				id = ME_Sardinia_Piedmont_Events.3
			}
		}
	}

	spi_fall_dukedom = {
		icon = establish_a_standing_army
		position = 11
		required_missions = {
			spi_regia_armata_sarda
		}
		provinces_to_highlight = {
			area = tuscany_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			tuscany_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = spi_florentine_mind
				duration = 9125
			}
		}
	}

	spi_conquest_of_rome = {
		icon = sway_the_pope
		required_missions = {
			spi_lombardo_veneto
			spi_fall_dukedom
			spi_fall_thousand_sigil
			spi_conquest_sicily
		}
		position = 13
		trigger = {
			NOT = {
				any_country = {
					culture_group = latin
					capital_scope = {
						region = italy_region
					}
					army_strength = {
						who = ROOT
						value = 1
					}
				}
			}
		}
		effect = {
			118 = { add_core = ROOT }
		}
	}	
}

SardiniPiedmont_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPI
			AND = {
				OR = {
					tag = SAR
					tag = SAV
				}
				has_country_flag = spi_without_spi
			}
			OR = {
				has_country_flag = spi_without_spi
				tag = SPI
			}
			#tag = ITA
		}
		OR = {
			AND = {
				was_tag = SAV
				OR = {
					NOT = { has_dlc = "Emperor" }
					AND = {
						has_dlc = "Emperor"
						has_country_flag = use_missions_expanded_missions_instead_of_paradox
					}
				}
			}
			was_tag = SAR
		}
	}
	has_country_shield = yes

	spi_port_modernization = {
		icon = establish_a_standing_army
		position = 11
		required_missions = {
			spi_regia_armata_sarda
			spi_industrialisation_attempts
		}
		provinces_to_highlight = {
			OR = {
				province_id = 102
				province_id = 101
				province_id = 127
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { has_shipyard_building_trigger = yes }
				NOT = { has_dock_building_trigger = yes }
			}
		}
		trigger = {
			102 = {
				owned_by = ROOT
				base_production = 15
				OR = {
					has_shipyard_building_trigger = yes
					has_dock_building_trigger = yes
				}
			}
			101 = {
				owned_by = ROOT
				base_production = 15
				OR = {
					has_shipyard_building_trigger = yes
					has_dock_building_trigger = yes
				}
			}
			127 = {
				owned_by = ROOT
				base_production = 15
				OR = {
					has_shipyard_building_trigger = yes
					has_dock_building_trigger = yes
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = spi_naval_preparation
				duration = 9125
			}
		}
	}

	spi_fall_thousand_sigil = {
		icon = establish_a_standing_army
		position = 12
		required_missions = {
			spi_port_modernization
		}
		provinces_to_highlight = {
			province_id = 121
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			121 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = end_borboni
				duration = 9125
			}
		}
	}
}

SardiniPiedmont_missions_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SPI
			AND = {
				OR = {
					tag = SAR
					tag = SAV
				}
				has_country_flag = spi_without_spi
			}
			OR = {
				has_country_flag = spi_without_spi
				tag = SPI
			}
			#tag = ITA
		}
		OR = {
			AND = {
				was_tag = SAV
				OR = {
					NOT = { has_dlc = "Emperor" }
					AND = {
						has_dlc = "Emperor"
						has_country_flag = use_missions_expanded_missions_instead_of_paradox
					}
				}
			}
			was_tag = SAR
		}
	}
	has_country_shield = yes
	
	spi_industrialisation_attempts = {
		icon = public_works
		position = 10
		required_missions = { }
		trigger = {
			num_of_owned_manufactory_trigger = { amount = 10 }
		}
		effect = {
			every_owned_province = {
				limit = {
					has_manufactory_trigger = yes
				}
				add_province_modifier = {
					name = spi_industrialisaton_sprint
					duration = 5475
				}
			}
		}
	}
	
	spi_mining_investments = {
		icon = reform_the_monte
		position = 11
		required_missions = {
			spi_industrialisation_attempts
		}
		provinces_to_highlight = {
			province_id = 2986
			OR = {
				NOT = { num_of_times_improved = 5 }
				OR = {
					NOT = { has_building = workshop }
					NOT = { has_building = counting_house }
				}
				devastation = 1
			}
		}
		trigger = {
			treasury = 500
			2986 = {
				num_of_times_improved = 5
				OR = {
					has_building = workshop
					has_building = counting_house
				}
				NOT = { devastation = 1 }
			}
		}
		effect = {
			country_event = {
				id = ME_Sardinia_Piedmont_Events.2
			}
		}
	}

	spi_conquest_sicily = {
		icon = establish_a_standing_army
		position = 12
		required_missions = {
			spi_port_modernization
		}
		provinces_to_highlight = {
			OR = {
				area = western_sicily_area
				area = sicily_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			western_sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sicily_area = {
				NOT = {
					province_id = 126
				}
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			western_sicily_area = {
				add_province_modifier = {
					name = spi_dream_independence
					duration = 3650
				}
			}
			sicily_area = {
				add_province_modifier = {
					name = spi_dream_independence
					duration = 3650
				}
			}
		}
	}
}