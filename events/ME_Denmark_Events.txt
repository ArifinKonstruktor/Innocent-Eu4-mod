namespace = ME_Denmark_Events

#The Bark King and the Pirate King
country_event = {
	id = ME_Denmark_Events.1
	title = ME_Denmark_Events.1.T
	desc = ME_Denmark_Events.1.D
	picture = GOOD_WITH_MONARCH_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.1.OPT1

		ai_chance = {
			factor = 50
		}

		add_prestige = 10
		add_legitimacy_equivalent = {
			value = 10
		}
		if = {
			limit = {
				exists = STE
			}
			add_opinion = {
				who = STE
				modifier = dan_traitor
			}
			reverse_add_opinion = {
				who = STE
				modifier = dan_traitor
			}
		}
		if = {
			limit = {
				exists = WOL
			}
			add_opinion = {
				who = WOL
				modifier = dan_traitor
			}
			reverse_add_opinion = {
				who = WOL
				modifier = dan_traitor
			}
		}
	}

	option = {
		name = ME_Denmark_Events.1.OPT2
		trigger = {
			hidden_trigger = {
				OR = {
					exists = STE
					exists = WOL
					exists = SWE
				}
			}
		}

		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				exists = STE
			}
			add_opinion = {
				who = STE
				modifier = dan_traitor_spared
			}
			reverse_add_opinion = {
				who = STE
				modifier = dan_traitor_spared
			}
		}
		if = {
			limit = {
				exists = WOL
			}
			add_opinion = {
				who = WOL
				modifier = dan_traitor_spared
			}
			reverse_add_opinion = {
				who = WOL
				modifier = dan_traitor_spared
			}
		}
		if = {
			limit = {
				exists = SWE
			}
			add_opinion = {
				who = SWE
				modifier = dan_traitor_spared_swe
			}
			reverse_add_opinion = {
				who = SWE
				modifier = dan_traitor_spared_swe
			}
		}
	}
}

#Kaptajn Steen
country_event = {
	id = ME_Denmark_Events.2
	title = ME_Denmark_Events.2.T
	desc = ME_Denmark_Events.2.D
	picture = GENERALS_DISCUSSING_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.2.OPT1

		ai_chance = {
			factor = 50
		}
		
		define_admiral = {
			name = "Kaptain Steen"
			fire = 4
			shock = 4
			manuever = 4
			siege = 1
		}
	}
}

#A Portuguese Offer
country_event = {
	id = ME_Denmark_Events.3
	title = ME_Denmark_Events.3.T
	desc = ME_Denmark_Events.3.D
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.3.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_treasury = -50
		custom_tooltip = Danish_Porugues_Expedition_TT
		set_country_flag = danish_portugues_expedition
	}

	option = {
		name = ME_Denmark_Events.3.OPT2

		ai_chance = {
			factor = 50
		}
		
		add_dip_power = 50
		add_adm_power = 50
	}
}

#Remarkable Results
country_event = {
	id = ME_Denmark_Events.4
	title = ME_Denmark_Events.4.T
	desc = ME_Denmark_Events.4.D
	picture = COLONIZATION_eventPicture

	fire_only_once = yes

	trigger = {
		has_country_flag = danish_portugues_expedition
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		hidden_effect = {
			set_country_flag = dan_remarkable_results
		}
	}

	option = {
		name = ME_Denmark_Events.4.OPT1

		ai_chance = {
			factor = 50
		}
		
		1610 = { discover_country = ROOT }
		1481 = { discover_country = ROOT }
		1924 = { discover_country = ROOT }
		1482 = { discover_country = ROOT }
		1484 = { discover_country = ROOT }
		1496 = { discover_country = ROOT }
		1493 = { discover_country = ROOT }
	}
}

#Exporting Religion
country_event = {
	id = ME_Denmark_Events.5
	title = ME_Denmark_Events.5.T
	desc = ME_Denmark_Events.5.D
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes
	trigger = {
		has_country_flag = dan_remarkable_results
		OR = {
			is_year = 1523
			exploration_ideas = 1
		}
	}

	option = {
		name = ME_Denmark_Events.5.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_years_of_income = -0.5
		custom_tooltip = dan_Edege_TT
		set_country_flag = dan_edege_departed
	}

	option = {
		name = ME_Denmark_Events.5.OPT2

		ai_chance = {
			factor = 50
		}
	}
}

#Aid to Greenland
country_event = {
	id = ME_Denmark_Events.6
	title = ME_Denmark_Events.6.T
	desc = ME_Denmark_Events.6.D
	picture = COLONIZATION_eventPicture

	fire_only_once = yes

	trigger = {
		has_country_flag = dan_edege_departed
	}

	mean_time_to_happen = {
		months = 3
	}

	option = {
		name = ME_Denmark_Events.6.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_adm_power = -50
		add_manpower = -2
		hidden_effect = {
			country_event = {
				id = ME_Denmark_Events.7
			}
		}
	}

	option = {
		name = ME_Denmark_Events.6.OPT2

		ai_chance = {
			factor = 50
		}

		clr_country_flag = dan_edege_departed
		custom_tooltip = dan_Edege_removed_TT
	}
}

#Founding of Haabets Colonie
country_event = {
	id = ME_Denmark_Events.7
	title = ME_Denmark_Events.7.T
	desc = ME_Denmark_Events.7.D
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes
	trigger = {
		owns_or_non_sovereign_subject_of = 1105
		owns_or_non_sovereign_subject_of = 1104
	}

	option = {
		name = ME_Denmark_Events.7.OPT1

		ai_chance = {
			factor = 50
		}
		
		1105 = {
			rename_capital = "Haabets"
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 3
		}
		1104 = {
			rename_capital = "Godt-Haab"
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 3
		}
	}
}

#Charlotte Amalie
country_event = {
	id = ME_Denmark_Events.8
	title = ME_Denmark_Events.8.T
	desc = ME_Denmark_Events.8.D
	picture = COLONIZATION_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.8.OPT1

		ai_chance = {
			factor = 50
		}
		
		493 = {
			rename_capital = "Charlotte Amalie"
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 3
		}
	}
}

#The Development of Copenhagen
country_event = {
	id = ME_Denmark_Events.9
	title = ME_Denmark_Events.9.T
	desc = ME_Denmark_Events.9.D
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = { set_country_flag = dan_development_copenhagen }
	}

	option = {
		name = ME_Denmark_Events.9.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_mercantilism = 5
		12 = {
			rename_capital = "Copenhagen"
			create_or_add_center_of_trade_level = {
				level = 1
			}
		}
	}
}

#Eastern Fortification Projects
country_event = {
	id = ME_Denmark_Events.10
	title = ME_Denmark_Events.10.T
	desc = ME_Denmark_Events.10.D
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.10.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_years_of_income = -0.25
		4165 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			rename_capital = "Christianstad"
		}
		1982 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			rename_capital = "Christianopel"
		}
		skaneland_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_province_modifier = {
				name = dan_eastern_fortifications
				duration = -1
			}
		}
	}

	option = {
		name = ME_Denmark_Events.10.OPT2

		ai_chance = {
			factor = 50
		}
	}
}

#The Many Thrones of Bavaria
country_event = {
	id = ME_Denmark_Events.11
	title = ME_Denmark_Events.11.T
	desc = ME_Denmark_Events.11.D
	picture = DIPLOMACY_SIGNING_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.11.OPT1

		ai_chance = {
			factor = 50
		}
		
		release = BAV
		east_bavaria_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = BAV
			cede_province = BAV
		}
		upper_bavaria_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = BAV
			cede_province = BAV
		}
		lower_bavaria_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_core = BAV
			cede_province = BAV
		}
		BAV = {
			set_dynasty = ROOT
			change_religion = ROOT
			hidden_effect = {
				add_manpower = 20
				add_treasury = 200
				set_capital = 65
				65 = { 
					build_to_forcelimit = {
						infantry = 0.7
						cavalry = 0.2
						artillery = 0.1
					}
				}
			}
		}
		if = {
			limit = {
				is_expanded_mod_active = { mod = subjects }
				can_create_subject_type = {
					subject = ROOT
					subject_type = brother_kingdom
				}
			}
			create_subject = {
				subject_type = brother_kingdom
				subject = ROOT
			}
		}
		else = {
			create_subject = {
				subject_type = personal_union
				subject = ROOT
			}
		}
	}

	option = {
		name = ME_Denmark_Events.11.OPT2

		ai_chance = {
			factor = 50
		}
	}
}

#The Formalization of Kalmar
country_event = {
	id = ME_Denmark_Events.12
	title = ME_Denmark_Events.12.T
	desc = ME_Denmark_Events.12.D
	picture = DIPLOMACY_SIGNING_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.12.OPT1

		ai_chance = {
			factor = 50
		}
		
		override_country_name = DAN_KALMAR_EMPIRE
	}

	option = {
		name = ME_Denmark_Events.12.OPT2

		ai_chance = {
			factor = 50
		}
	}
}

#The Future of Faith
country_event = {
	id = ME_Denmark_Events.13
	title = ME_Denmark_Events.13.T
	desc = ME_Denmark_Events.13.D
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes
	trigger = {
		owns = 12
	}

	option = {
		name = ME_Denmark_Events.13.OPT1

		ai_chance = {
			factor = 33
		}
		
		add_country_modifier = {
			name = dan_stayed_true_to_catholicism
			duration = -1
		}
	}

	option = {
		name = ME_Denmark_Events.13.OPT2

		ai_chance = {
			factor = 33
		}

		add_country_modifier = {
			name = dan_peaceful_conversions
			duration = 36500
		}
		if = {
			limit = {
				NOT = {
					num_of_centers_of_reformation = {
						religion = protestant
						count = 3
					}
				}
			}
			12 = {
				add_reform_center = protestant
			}
		}
		else = {
			add_country_modifier = {
				name = dan_embracing_protestantism
				duration = -1
			}
		}
	}

	option = {
		name = ME_Denmark_Events.13.OPT3

		ai_chance = {
			factor = 33
		}

		add_country_modifier = {
			name = dan_peaceful_conversions
			duration = 36500
		}
		if = {
			limit = {
				NOT = {
					num_of_centers_of_reformation = {
						religion = reformed
						count = 3
					}
				}
			}
			12 = {
				add_reform_center = reformed
			}
		}
		else = {
			add_country_modifier = {
				name = dan_embracing_reformation
				duration = -1
			}
		}
	}
}

#A New Danelaw
country_event = {
	id = ME_Denmark_Events.14
	title = ME_Denmark_Events.14.T
	desc = ME_Denmark_Events.14.D
	picture = CONQUEST_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.14.OPT1

		ai_chance = {
			factor = 50
		}
		
		
	}

	option = {
		name = ME_Denmark_Events.14.OPT2

		ai_chance = {
			factor = 50
		}

		british_isles_region = {
			limit = {
				owned_by = ROOT
			}
			add_province_modifier = {
				name = dan_stanford_bridge_rectified
				duration = 18250
			}
		}
		british_isles_region = {
			limit = {
				NOT = { owned_by = ROOT }
				NOT = { is_core = ROOT }
			}
			add_permanent_claim = ROOT
		}
	}
}

#Ludvig Holberg
country_event = {
	id = ME_Denmark_Events.15
	title = ME_Denmark_Events.15.T
	desc = ME_Denmark_Events.15.D
	picture = ADVISOR_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.15.OPT1

		ai_chance = {
			factor = 50
		}
		
		define_advisor = {
			type = artist
			skill = 3
			cost_multiplier = 0.50
			name = "Ludvig Holberg"
		}
	}
}

#The Spoils of Victory
country_event = {
	id = ME_Denmark_Events.16
	title = ME_Denmark_Events.16.T
	desc = ME_Denmark_Events.16.D
	picture = wars_of_religion

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.16.OPT1

		ai_chance = {
			factor = 50
		}

		elector = yes
	}

	option = {
		name = ME_Denmark_Events.16.OPT2

		ai_chance = {
			factor = 50
		}		
	}
}

#The Purchase of 370
country_event = {
	id = ME_Denmark_Events.17
	title = ME_Denmark_Events.17.T
	desc = ME_Denmark_Events.17.D
	picture = DIPLOMACY_SIGNING_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.17.OPT1

		ai_chance = {
			factor = 50
		}
		
		370 = {
			add_core = FROM
			remove_core = ROOT
			cede_province = FROM
		}
		add_treasury = 100
		FROM = { add_treasury = -100 }
	}

	option = {
		name = ME_Denmark_Events.17.OPT2

		ai_chance = {
			factor = 50
		}
		
		add_prestige = 10
		add_opinion = {
			who = FROM
			modifier = dan_refused_purchase
		}
	}
}

#The Purchase of 371
country_event = {
	id = ME_Denmark_Events.18
	title = ME_Denmark_Events.18.T
	desc = ME_Denmark_Events.18.D
	picture = DIPLOMACY_SIGNING_eventPicture

	is_triggered_only = yes

	option = {
		name = ME_Denmark_Events.18.OPT1

		ai_chance = {
			factor = 50
		}
		
		371 = {
			add_core = FROM
			remove_core = ROOT
			cede_province = FROM
		}
		add_treasury = 100
		FROM = { add_treasury = -100 }
	}

	option = {
		name = ME_Denmark_Events.18.OPT2

		ai_chance = {
			factor = 50
		}
		
		add_prestige = 10
		add_opinion = {
			who = FROM
			modifier = dan_refused_purchase
		}
	}
}

#Borsen
country_event = {
	id = ME_Denmark_Events.19
	title = ME_Denmark_Events.19.T
	desc = ME_Denmark_Events.19.D
	picture = CITY_DEVELOPMENT_eventPicture

	fire_only_once = yes
	trigger = {
		has_country_flag = dan_development_copenhagen
		12 = {
			owned_by = ROOT
			has_trade_building_trigger = yes
		}
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = ME_Denmark_Events.19.OPT1

		ai_chance = {
			factor = 50
		}
		
		12 = {
			if = {
				limit = {
					OR = {
						has_building = trade_depot
						has_building = marketplace
					}
				}
				remove_building = trade_depot
				remove_building = marketplace
				add_building = stock_exchange
			}
			else = {
				add_province_modifier = {
					name = dan_borsen
					duration = -1
				}
			}
		}
	}
}

#Danish Education
country_event = {
	id = ME_Denmark_Events.20
	title = ME_Denmark_Events.20.T
	desc = ME_Denmark_Events.20.D
	picture = UNIVERSITY_eventPicture

	fire_only_once = yes
	trigger = {
		is_year = 1480
	}

	mean_time_to_happen = {
		months = 10
	}

	option = {
		name = ME_Denmark_Events.20.OPT1

		ai_chance = {
			factor = 50
		}
		
		if = {
			limit = {
				has_dlc = "Rule Britannia"
			}
			change_innovativeness = 2
		}
		else = {
			add_adm_power = 50
			add_dip_power = 50
			add_mil_power = 50
		}
		add_country_modifier = {
			name = dan_danish_nothing
			duration = 3650
		}
	}

	option = {
		name = ME_Denmark_Events.20.OPT2

		ai_chance = {
			factor = 50
		}
		
		if = {
			limit = {
				has_dlc = "Rule Britannia"
			}
			change_innovativeness = -2
		}
		else = {
			add_adm_power = -25
			add_dip_power = -25
			add_mil_power = -25
		}
		add_stability_or_adm_power = yes
		add_country_modifier = {
			name = dan_foreign_knowledge
			duration = 7300
		}
	}
}

#Dutch Farmers in Denmark
country_event = {
	id = ME_Denmark_Events.21
	title = ME_Denmark_Events.21.T
	desc = ME_Denmark_Events.21.D
	picture = FARMING_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
		owns = 12
		OR = {
			any_country = {
				OR = {
					primary_culture = dutch
					primary_culture = flemish
					primary_culture = frisian
				}
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
			any_owned_province = {
				OR = {
					culture = dutch
					culture = flemish
					culture = frisian
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	option = {
		name = ME_Denmark_Events.21.OPT1

		ai_chance = {
			factor = 50
		}
		
		12 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}

#Fladstrand Citadel
country_event = {
	id = ME_Denmark_Events.22
	title = ME_Denmark_Events.22.T
	desc = ME_Denmark_Events.22.D
	picture = FORT_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
		owns = 4149
		4149 = {
			has_building = fort_15th
		}
	}

	mean_time_to_happen = {
		months = 20
	}

	option = {
		name = ME_Denmark_Events.22.OPT1

		ai_chance = {
			factor = 50
		}
		
		4149 = {
			remove_building = fort_15th
			add_building = fort_16th
			rename_capital = "Fredericia"
		}
	}
}

#Knyppling
country_event = {
	id = ME_Denmark_Events.23
	title = ME_Denmark_Events.23.T
	desc = ME_Denmark_Events.23.D
	picture = CITY_DEVELOPMENT_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
		owns = 13
		owns = 15
		owns = 1982
		owns = 13
		is_year = 1500
	}

	mean_time_to_happen = {
		years = 4
	}

	option = {
		name = ME_Denmark_Events.23.OPT1

		ai_chance = {
			factor = 50
		}
		
		15 = {
			add_base_production = 2
			change_trade_goods = cloth
		}
		1982 = {
			add_base_production = 2
			change_trade_goods = cloth
		}
		13 = {
			add_base_production = 2
			change_trade_goods = cloth
		}
	}
}

#Kurant Bank
country_event = {
	id = ME_Denmark_Events.24
	title = ME_Denmark_Events.24.T
	desc = ME_Denmark_Events.24.D
	picture = BANKRUPTCY_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
	}

	mean_time_to_happen = {
		years = 40
	}

	option = {
		name = ME_Denmark_Events.24.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_country_modifier = {
			name = dan_kurant_bank
			duration = -1
		}
	}
}

#Kronborg Castle
country_event = {
	id = ME_Denmark_Events.25
	title = ME_Denmark_Events.25.T
	desc = ME_Denmark_Events.25.D
	picture = FORTIFIED_CITY_WITH_CARAVAN_OUTSIDE_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
		owns = 12
		has_institution = renaissance
		years_of_income = 0.25
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = ME_Denmark_Events.25.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_years_of_income = -0.25
		12 = {
			add_province_modifier = {
				name = dan_kronborg_fortress
				duration = -1
			}
		}
	}
}

#A Divine Visit
country_event = {
	id = ME_Denmark_Events.26
	title = ME_Denmark_Events.26.T
	desc = ME_Denmark_Events.26.D
	picture = POPE_PREACHING_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DAN
		PAP = {
			has_opinion = {
				who = ROOT
				value = 50
			}
		}
		is_year = 1474
		current_age = age_of_discovery
	}

	mean_time_to_happen = {
		months = 4
	}

	option = {
		name = ME_Denmark_Events.26.OPT1

		ai_chance = {
			factor = 50
		}
		
		add_prestige = 10
		add_papal_influence = 10
		add_dip_power = 50
	}
}