namespace = ME_Oda_Events

country_event = { # The Rise of Oda Nobunaga
	id = ME_Oda_Events.1
	title = ME_Oda_Events.EVTNAME1
	desc = ME_Oda_Events.EVTDESC1
	picture = COURT_eventPicture

	mean_time_to_happen = { months = 12 }

	trigger = {
		tag = ODA
		mission_completed = ODA_western_chubu
	}

	option = {
		name = ME_Oda_Events1.EVTOPT1
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2

			}
		}
		if = {
			limit = {
				has_heir = yes
			}
			kill_heir = yes
		}
		define_ruler = {
			name = "Oda"
			dynasty = "Nobunaga"
			adm = 2
			max_random_adm = 6
			dip = 2
			max_random_adm = 5
			mil = 2
			max_random_adm = 4
			age = 20
			claim = 100
		}
		set_ruler_flag = ODA_Nobunaga
	}

	option = {
		name = ME_Oda_Events1.EVTOPT2
		ai_chance = {
			factor = 50
		}

		set_ruler_flag = ODA_Nobunaga
		add_prestige = 10
		if = {
			limit = {
				stability = 3
			}
			add_adm_power = 50
		}
		else = {
			add_stability = 1
		}
	}
}

country_event = { # The Rise of Toyotomi Hideyoshi
	id = ME_Oda_Events.2
	title = ME_Oda_Events.EVTNAME2
	desc = ME_Oda_Events.EVTDESC2
	picture = BATTLE_eventPicture

	fire_only_once = yes

	trigger = {
		tag = ODA
		has_country_flag = ODA_nobunaga
		is_at_war = yes
	}

	option = {
		name = ME_Oda_Events2.EVTOPT1
		ai_chance = {
			factor = 50
		}
		add_mil_power = 50
		add_army_tradition = 5
		define_general = {
			name = "Toyotomi Hideyoshi"
			shock = 3
			fire = 2
			manuever = 3
			siege = 5
		}
	}

	option = {
		name = ME_Oda_Events2.EVTOPT2
		ai_chance = {
			factor = 50
		}

		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 20
		}
	}
}

country_event = { # The Death of Nobunaga
	id = ME_Oda_Events.3
	title = ME_Oda_Events.EVTNAME3
	desc = ME_Oda_Events.EVTDESC3
	picture = DEATH_OF_HEIR_eventPicture

	fire_only_once = yes

	trigger = {
		tag = ODA
		has_country_flag = ODA_Nobunaga
		NOT = {
			has_ruler = "Oda Nobunaga" 
		}
	}

	option = {
		name = ME_Oda_Events3.EVTOPT1
		ai_chance = {
			factor = 50
		}
		if = {
			limit = {
				has_heir = yes
			}
			kill_heir = yes
		}
		define_ruler = {
			name = "Toyotomi"
			dynasty = "Hideyoshi"
			adm = 1
			max_random_adm = 4
			dip = 1
			max_random_adm = 6
			mil = 1
			max_random_adm = 5
			age = 50
			claim = 75
		}
	}

	option = {
		name = ME_Oda_Events3.EVTOPT2
		ai_chance = {
			factor = 50
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 20
		}
		define_advisor = {
			type = diplomat
			name = "Toyotomi Hideyoshi"
			skill = 3
			culture = ROOT
			religion = ROOT
			cost_multiplier = 0.2
		}
	}
}

country_event = { # Oda Expansionism
	id = ME_Oda_Events.4
	title = ME_Oda_Events.EVTNAME4
	desc = ME_Oda_Events.EVTDESC4
	picture = COURT_eventPicture

	is_triggered_only = yes
	major = yes

	option = {
		name = ME_Oda_Events4.EVTOPT1
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 100
				}
				FROM = {
					has_opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
		FROM = {
			add_country_modifier = {
				name = ODA_appeased_shogun
				duration = 7300
			}
			if = {
				limit = {
					stability = 3
				}
				add_adm_power = 50
			}
			else = {
				add_stability = 1
			}
		}
		add_country_modifier = {
			name = ODA_peace_shogun
			duration = 7300
		}
	}

	option = {
		name = ME_Oda_Events4.EVTOPT2
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				NOT = {
					has_opinion = {
						who = FROM
						value = -100
					}
				}
				NOT = {
					FROM = {
						has_opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
		}
		FROM = {
			add_country_modifier = {
				name = ODA_irritated_shogun
				duration = 7300
			}
			add_stability = -1
		}
		add_country_modifier = {
			name = ODA_quelling_daimyo
			duration = 7300
		}
	}
}

country_event = { # Hidden Event needed
	id = ME_Oda_Events.5
	title = ME_Oda_Events.EVTNAME5
	desc = ME_Oda_Events.EVTDESC5
	picture = COURT_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = ME_Oda_Events5.EVTOPT1
		ai_chance = {
			factor = 100
		}
		ROOT = { save_event_target_as = oda_allied_rival }
	}
}