namespace = ME_Jerusalem_Events

#Blood Moon over Cairo
country_event = {
	id = ME_Jerusalem_Events.1
	title = ME_Jerusalem_Events.1.EVTNAME
	desc = ME_Jerusalem_Events.1.EVTDESC
	picture = REVOLUTION_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.1.EVTOPTA
		
		361 = {
			add_devastation = 50
			add_years_of_income = 1
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
			add_province_modifier = {
				name = koj_war_atrocities
				duration = 1825
			}
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.1.EVTOPTB
		
		add_country_modifier = {
			name = koj_spared_muslims
			duration = 3650
		}
		add_country_modifier = {
			name = koj_benevolent_conqueror
			duration = -1
		}
	}
}

#A Helping Hand
country_event = {
	id = ME_Jerusalem_Events.2
	title = ME_Jerusalem_Events.2.EVTNAME
	desc = ME_Jerusalem_Events.2.EVTDESC
	picture = DIPLOMACY_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.2.EVTOPTA
		
		ai_chance = {
			factor = 0.2
		}
		
		add_yearly_manpower = 1
	}
	
	option = {
		name = ME_Jerusalem_Events.2.EVTOPTB
		
		ai_chance = {
			factor = 0.3
		}
		
		add_years_of_income = 1
	}
	
	option = {
		name = ME_Jerusalem_Events.2.EVTOPTC
		
		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -5
	}
}

#Dynastic Ties
country_event = {
	id = ME_Jerusalem_Events.3
	title = ME_Jerusalem_Events.3.EVTNAME
	desc = ME_Jerusalem_Events.3.EVTDESC
	picture = NEW_HEIR_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.3.EVTOPTA
		
		define_heir = {
			dynasty = FROM
			adm = 2
			dip = 1
			mil = 1
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.3.EVTOPTB
		
		define_heir = {
			dynasty = FROM
			adm = 1
			dip = 2
			mil = 1
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.3.EVTOPTC
		
		define_heir = {
			dynasty = FROM
			adm = 1
			dip = 1
			mil = 2
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.4.EVTOPTD
		
		add_country_modifier = {
			name = koj_new_bloodline
			duration = -1
		}
		custom_tooltip = ME_Jerusalem_Events.3.tt
	}
}

#Brilliant Italian Minds
country_event = {
	id = ME_Jerusalem_Events.4
	title = ME_Jerusalem_Events.4.EVTNAME
	desc = ME_Jerusalem_Events.4.EVTDESC
	picture = ADVISOR_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.4.EVTOPTA
		
		define_advisor = {
			type = artist
			name = "Raffaelo Sanzio"
			skill = 3
			cost_multiplier = 0.75
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.4.EVTOPTB
		
		define_advisor = {
			type = statesman
			name = "Enzo Perrini"
			skill = 3
			cost_multiplier = 0.75
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.4.EVTOPTC
		
		define_advisor = {
			type = recruitmaster
			name = "Federico D'Antonio"
			skill = 3
			cost_multiplier = 0.75
		}
	}
}

#The Hunt for the Spear
country_event = {
	id = ME_Jerusalem_Events.5
	title = ME_Jerusalem_Events.5.EVTNAME
	desc = ME_Jerusalem_Events.5.EVTDESC
	picture = PRAYING_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.5.EVTOPTA
		
		country_event = { id = ME_Jerusalem_Events.6 }
		custom_tooltip = ME_Jerusalem_Events.5.tt
		set_country_flag = cave_entered
	}
}

#The Garden Tomb
country_event = {
	id = ME_Jerusalem_Events.6
	title = ME_Jerusalem_Events.6.EVTNAME
	desc = ME_Jerusalem_Events.6.EVTDESC
	picture = SPY_eventPicture
	
	major = yes
	fire_only_once = yes
	
	trigger = {
		has_country_flag = cave_entered
	}
	
	mean_time_to_happen = {
		months = 18
	}
	
	option = {
		name = ME_Jerusalem_Events.6.EVTOPTA
		
		country_event = { id = ME_Jerusalem_Events.7 }
		custom_tooltip = ME_Jerusalem_Events.6.tt
		set_country_flag = make_our_way
	}
	
	option = {
		name = ME_Jerusalem_Events.6.EVTOPTB
		
		custom_tooltip = ME_Jerusalem_Events.6.tt.2
		if = {
			limit = {
				religion = catholic
			}
			add_papal_influence = 50
		}
	}
}

#Chamber of God
country_event = {
	id = ME_Jerusalem_Events.7
	title = ME_Jerusalem_Events.7.EVTNAME
	desc = ME_Jerusalem_Events.7.EVTDESC
	picture = COMET_SIGHTED_eventPicture
	
	major = yes
	fire_only_once = yes
	
	trigger = {
		has_country_flag = make_our_way
	}
	
	mean_time_to_happen = {
		months = 2
	}
	
	option = {
		name = ME_Jerusalem_Events.7.EVTOPTA
		
		custom_tooltip = ME_Jerusalem_Events.7.tt
		set_country_flag = its_mine_its_mine
	}
	
	option = {
		name = ME_Jerusalem_Events.7.EVTOPTB
		
		custom_tooltip = ME_Jerusalem_Events.7.tt.2
		if = {
			limit = {
				religion = catholic
			}
			add_papal_influence = 100
		}
	}
}

#An Addition to the Pile
country_event = {
	id = ME_Jerusalem_Events.8
	title = ME_Jerusalem_Events.8.EVTNAME
	desc = ME_Jerusalem_Events.8.EVTDESC
	picture = DEATH_OF_HEIR_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.8.EVTOPTA
		
		if = {
			limit = {
				has_regency = no
			}
			kill_ruler = yes
		}
	}
}

#Earthly Divinity
country_event = {
	id = ME_Jerusalem_Events.9
	title = ME_Jerusalem_Events.9.EVTNAME
	desc = ME_Jerusalem_Events.9.EVTDESC
	picture = POPE_PREACHING_eventPicture
	
	major = yes
	is_triggered_only = yes
	
	option = {
		name = ME_Jerusalem_Events.9.EVTOPTA
		
		if = {
			limit = {
				has_dlc = "Rights of Man"
				NOT = { ruler_has_personality = immortal_personality }
			}
			random_list = {
				33 = {
					change_adm = 3
					change_dip = 3
					change_mil = 3
				}
				33 = {
					add_ruler_personality = immortal_personality
				}
				33 = {
					add_country_modifier = {
						name = koj_spear_of_destiny
						duration = -1
					}
				}
			}
		}
		else = {
			random_list = {
				50 = {
					change_adm = 3
					change_dip = 3
					change_mil = 3
				}
				50 = {
					add_country_modifier = {
						name = koj_spear_of_destiny
						duration = -1
					}
				}
			}
		}
	}
}

#Sword Manager event
country_event = {
	id = ME_Jerusalem_Events.10
	title = ME_Jerusalem_Events.10.EVTNAME
	desc = ME_Jerusalem_Events.10.EVTDESC
	picture = DIPLOMACY_eventPicture
	
	hidden = yes
	fire_only_once = yes
	
	trigger = {
		has_country_flag = its_mine_its_mine
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	immediate = {
		hidden_effect = {
			random_list = {
				25 = {
					country_event = { id = ME_Jerusalem_Events.7 }
				}
				75 = {
					country_event = { id = ME_Jerusalem_Events.8 }
				}
			}
		}
	}
	
	option = {
		name = ME_Jerusalem_Events.10.EVTOPTA
		
		ai_chance = { factor = 100 }
	}
}