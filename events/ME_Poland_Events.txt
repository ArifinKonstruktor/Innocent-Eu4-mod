namespace = ME_Poland_Events

country_event = {
	id = ME_Poland_Events.1
	title = ME_Poland_Events.1.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.1.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.1.a
		
		ai_chance = { factor = 0.5 }
		
		4525 = {
			cede_province = ROOT
			add_core = ROOT
		}
		1940 = {
			cede_province = ROOT
			add_core = ROOT
		}
	}
	option = {
		name = ME_Poland_Events.1.a
		
		ai_chance = { factor = 0.5 }
	}
}

country_event = {
	id = ME_Poland_Events.2 #Zamość
	title = ME_Poland_Events.2.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.2.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.2.a
		
		ai_chance = { factor = 0.5 }
		
		add_years_of_income = -0.5
		4538 = {
			add_base_tax = 3
			add_base_production = 3
			add_base_manpower = 2
		}
	}
	option = {
		name = ME_Poland_Events.2.a
		
		ai_chance = { factor = 0.5 }
	
		4538 = {
			add_base_tax = 2
			add_base_production = 2
			add_base_manpower = 1
		}
	}
}

country_event = {
	id = ME_Poland_Events.3 #Supporting Tatar War
	title = ME_Poland_Events.3.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.3.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.3.a
		
		ai_chance = { factor = 0.5 }
		
		FROM = {
			tooltip = { add_treasury = 100 }
		}
		if = {
			limit = {
				has_dlc = "Emperor"
			}
			add_curia_treasury = -100
		}
		else = {
			add_treasury = -100
		}
		FROM = {
			country_event = { id = ME_Poland_Events.4 }
		}
		custom_tooltip = POL_if_POL_goes_to_war_with_tatars
		
		add_country_modifier = {
			name = POL_supporting_eastern_catholicization
			duration = 10950
		}
	}
	option = {
		name = ME_Poland_Events.3.b
		
		ai_chance = { factor = 0.5 }
		
		add_prestige = -10
	}
}

country_event = {
	id = ME_Poland_Events.4 #Supporting Tatar War
	title = ME_Poland_Events.4.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.4.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.4.a
		
		ai_chance = { factor = 0.5 }
		
		add_treasury = 100
		custom_tooltip = POL_if_POL_goes_to_war_with_tatars_2
		set_country_flag = POL_Tatar
	}
}

country_event = {
	id = ME_Poland_Events.5 #Tatar War
	title = ME_Poland_Events.5.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.5.d

	is_triggered_only = yes
	
	major = yes
	major_trigger = {
		tag = PAP
	}
	
	trigger = {
		has_country_flag = POL_Tatar
		is_at_war = yes
		religion = catholic
		any_country = {
			culture_group = tatar
			war_with = ROOT
		}
	}
	
	option = {
		name = ME_Poland_Events.5.a
		
		ai_chance = { factor = 0.5 }
		
		add_treasury = 150
		if = {
			limit = {
				has_dlc = "Emperor"
			}
			add_curia_treasury = -150
		}
		else = {
			PAP = {
				add_treasury = -150
			}
		}
	}
}

country_event = {
	id = ME_Poland_Events.6 #Moldavia
	title = ME_Poland_Events.6.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.6.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.6.a #Moldavia shall be a buffer state
		
		ai_chance = { factor = 0.5 }
		
		1756 = {
			add_province_modifier = {
				name = POL_buffer_state
				duration = 10950
			}
			add_base_manpower = 1
		}
		add_country_modifier = {
			name = POL_buffer_state_2
			duration = 7300
		}
	}
	
	option = {
		name = ME_Poland_Events.6.b #Moldavia is our gateway to the trade in the Black Sea
		
		ai_chance = { factor = 0.5 }
		
		1756 = {
			add_trade_modifier = {
				who = ROOT
				duration = 10950
				power = 30
				key = POL_profiting_in_black_sea
			}
		}
	}
}

country_event = {
	id = ME_Poland_Events.7 #Moldavia
	title = ME_Poland_Events.7.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.7.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.7.a #Moldavia shall be a buffer state
		
		ai_chance = { factor = 0.5 }
		
		39 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						owner = { ai = yes }
						owned_by = ROOT
					}
				}
				cede_province = KUR
				add_core = KUR
				hidden_effect = {
					remove_core = ROOT
				}
			}
		}
		1935 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						owner = { ai = yes }
						owned_by = ROOT
					}
				}
				cede_province = KUR
				add_core = KUR
				hidden_effect = {
					remove_core = ROOT
				}
			}
		}
		create_subject = {
			subject = KUR
			subject_type = march
		}
		KUR = {
			add_idea_group = exploration_ideas
		}
	}
	
	option = {
		name = ME_Poland_Events.7.b #Moldavia is our gateway to the trade in the Black Sea
		
		ai_chance = { factor = 0.5 }
		
	}
}

country_event = {
	id = ME_Poland_Events.8 #Heir Needed
	title = ME_Poland_Events.8.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.8.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.8.a 
		
		ai_chance = { factor = 0.5 }
		
		add_years_of_income = -1
		custom_tooltip = POL_at_war_with_bohemia
		tooltip = {
			add_country_modifier = {
				name = POL_bohemian_knights
				desc = POL_until_war_with_bohemia
				duration = 9125
			}
		}
		custom_tooltip = POL_extra_mission_reward
		tooltip = {
			BOH = { add_liberty_desire = -25 }
		}
	}
	
	option = {
		name = ME_Poland_Events.8.b
		
		ai_chance = { factor = 0.5 }
		
		
	}
}

country_event = {
	id = ME_Poland_Events.9 #Silesia: Bohemia -> Poland
	title = ME_Poland_Events.9.t
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.9.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.9.a 
		
		ai_chance = { factor = 0.5 }
		
		add_country_modifier = {
			name = POL_recovering_piast_territories
			duration = 7300
		}
	}
	
	option = {
		name = ME_Poland_Events.9.b
		
		ai_chance = { factor = 0.5 }
		
		
	}
}

country_event = {
	id = ME_Poland_Events.10
	title = ME_Poland_Events.10.t #The Senat
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.10.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.10.a 
		
		ai_chance = { factor = 0.5 }
		
		custom_tooltip = POL_25_mil_power_per_privilege
		add_country_modifier = {
			name = POL_privileges_confirmed
			duration = 10950
		}
	}
	
	option = {
		name = ME_Poland_Events.10.b
		
		ai_chance = { factor = 0.5 }
		
		custom_tooltip = POL_ten_percent_autonomy
		add_stability_or_adm_power = yes
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
	}
	
	option = {
		name = ME_Poland_Events.10.c
		
		ai_chance = { factor = 0.5 }
		
		trigger = {
			is_expanded_mod_active = { mod = governments }
		}
		
		add_country_modifier = {
			name = POL_additional_privileges
			duration = -1
		}
	}
}

country_event = {
	id = ME_Poland_Events.11
	title = ME_Poland_Events.11.t #Industry
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.11.d

	is_triggered_only = yes
	
	immediate = {
		random_owned_province = {
			limit = {
				NOT = { trade_goods = glass }
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { trade_goods = paper }
				NOT = { trade_goods = dyes }
				NOT = {
					any_owned_province = {
						prev = {
							development = prev
						}
					}
				}
			}
			save_event_target_as = POL_11_1
			set_province_flag = POL_target
		}
		random_owned_province = {
			limit = {
				NOT = { trade_goods = glass }
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { trade_goods = paper }
				NOT = { trade_goods = dyes }
				NOT = { has_province_flag = POL_target }
				NOT = {
					any_owned_province = {
						prev = {
							development = prev
						}
					}
				}
			}
			save_event_target_as = POL_11_2
			set_province_flag = POL_target
		}
		random_owned_province = {
			limit = {
				NOT = { trade_goods = glass }
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { trade_goods = paper }
				NOT = { trade_goods = dyes }
				NOT = { has_province_flag = POL_target }
				NOT = {
					any_owned_province = {
						prev = {
							development = prev
						}
					}
				}
			}
			save_event_target_as = POL_11_3
		}
	}
	option = {
		name = ME_Poland_Events.11.a 
		
		ai_chance = { factor = 0.5 }
		
		event_target:POL_11_1 = {
			change_trade_goods = paper
			add_province_modifier = {
				name = POL_new_industry
				duration = 9125
			}
		}
		event_target:POL_11_2 = {
			change_trade_goods = glass
			add_province_modifier = {
				name = POL_new_industry
				duration = 9125
			}
		}
		event_target:POL_11_3 = {
			change_trade_goods = glass
			add_province_modifier = {
				name = POL_new_industry
				duration = 9125
			}
		}
	}
	
	option = {
		name = ME_Poland_Events.11.b
		
		ai_chance = { factor = 0.5 }
		
		custom_tooltip = POL_every_cloth
		tooltip = {
			add_province_modifier = {
				name = POL_cloth_reinforced
				duration = 10950
			}
		}
	}
}

country_event = {
	id = ME_Poland_Events.12
	title = ME_Poland_Events.12.t #A Puppet King
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.12.d

	is_triggered_only = yes
	
	option = {
		name = ME_Poland_Events.12.a 
		
		ai_chance = { factor = 0.5 }
		
		if = {
			limit = {
				senior_union_with = HUN 
			}
			HUN = {
				random_owned_province = {
					pretender_rebels = 2
				}
				random_owned_province = {
					pretender_rebels = 1
				}
			}
		}
		else = {
			random_province = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						area = alfold_area
						area = transdanubia_area
						area = transylvania_area
						area = southern_transylvania_area
						area = slovakia_area
					}
					pretender_rebels = 2
				}
			}
			random_province = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					OR = {
						area = alfold_area
						area = transdanubia_area
						area = transylvania_area
						area = southern_transylvania_area
						area = slovakia_area
					}
					pretender_rebels = 2
				}
			}
		}
		custom_tooltip = POL_gain_1_monarch_point
	}
	
	option = {
		name = ME_Poland_Events.12.b
		
		ai_chance = { factor = 0.5 }
		
		add_country_modifier = {
			name = POL_own_things
			duration = 9125
		}
	}
}

country_event = {
	id = ME_Poland_Events.13
	title = ME_Poland_Events.13.t #Revenge for Varna
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.13.d

	is_triggered_only = yes
	major = yes
	major_trigger = { 
		has_country_flag = POL_recipient
	}
	
	option = {
		name = ME_Poland_Events.13.a 
		
		ai_chance = { factor = 0.1 }
		
		FROM = {
			add_treasury = 300
		}
		add_curia_treasury = -300
	}
	option = {
		name = ME_Poland_Events.13.b
		
		ai_chance = { factor = 0.9 }
		
		
	}
}

country_event = {
	id = ME_Poland_Events.14
	title = ME_Poland_Events.14.t #Revenge for Varna - the main event
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.14.d

	trigger = {
		tag = POL
		mission_completed = POL_moldavia
		has_dlc = "Emperor"
		is_in_war = {
			casus_belli = cb_revenge_for_varna
		}
	}
	
	fire_only_once = yes
	option = {
		name = ME_Poland_Events.14.a 
		
		ai_chance = { factor = 0.5 }
		
		set_country_flag = POL_recipient
		PAP = {
			if = {
				limit = {
					
					NOT = { alliance_with = TUR }
				}
				country_event = { id = ME_Poland_Events.13 }
			}
		}
	}
	option = {
		name = ME_Poland_Events.14.b
		
		ai_chance = { factor = 0.5 }
		
		add_prestige_or_monarch_power = { amount = 20 }
	}
}

province_event = {
	id = ME_Poland_Events.15
	title = ME_Poland_Events.15.t #Conversion to Polish
	picture = MERCHANT_TALKING_eventPicture
	desc = ME_Poland_Events.15.d

	goto = ROOT 

	trigger = {
		owner = {
			has_country_flag = POL_mission
		}
		has_province_flag = POL_can_convert
	}
	
	mean_time_to_happen = {
		months = 480
		modifier = {
			factor = 0.75
			owner = { stability = 1 }
		}
		modifier = {
			factor = 0.75
			owner = { stability = 2 }
		}
		modifier = {
			factor = 0.75
			owner = { stability = 3 }
		}
		modifier = {
			factor = 0.5
			ROOT = {
				religion = owner
			}
		}
		modifier = {
			factor = 0.75
			NOT = { unrest = 0 }
		}
	}
	
	option = {
		name = ME_Poland_Events.15.a 
		
		ai_chance = { factor = 0.1 }
		
		change_culture = polish
	}
}