######
#Created by claivin for Missions Expanded
######

namespace = mamluk_revolt.1

country_event = { #revolt of the mamluks
	id = mamluk_revolt.1
	title = mamluk_revolt.1.t
	desc = mamluk_revolt.1.d
	picture = SHIP_SAILING_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	immediate = {
		random_owned_province = {
			limit = {
				is_core = MAM
			}
			set_province_flag = mamluks_declare_indep_from
		}
	}
	
	option = {
		name = mamluk_revolt.1.a
		create_independent_estate = {
			estate = estate_mamluk
			government = monarchy
			government_reform = iqta
			play_as = no
		}
		custom_tooltip = dow_mamluk_revolt
		every_known_country = {
			limit = {
				any_owned_province = {
					has_province_flag = mamluks_declare_indep_from
				}
			}
			ROOT = {
				declare_war_with_cb = {
					who = PREV
					casus_belli = cb_core
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = mamluk_rule_95
						has_province_modifier = mamluk_rule_90
					}
				}
				remove_province_modifier = mamluk_rule_95
				remove_province_modifier = mamluk_rule_90
			}
		}
	}
	
	option = {
		name = mamluk_revolt.1.b
		trigger = { 
			ai = no
		}
		create_independent_estate = {
			estate = estate_mamluk
			government = monarchy
			government_reform = iqta
			play_as = yes
		}
		custom_tooltip = dow_mamluk_revolt
		every_known_country = {
			limit = {
				any_owned_province = {
					has_province_flag = mamluks_declare_indep_from
				}
			}
			ROOT = {
				declare_war_with_cb = {
					who = PREV
					casus_belli = cb_core
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						has_province_modifier = mamluk_rule_95
						has_province_modifier = mamluk_rule_90
					}
				}
				remove_province_modifier = mamluk_rule_95
				remove_province_modifier = mamluk_rule_90
			}
		}
	}
}