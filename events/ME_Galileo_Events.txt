namespace = ME_Galileo_Events

#Galileo Galilei
country_event = {
	id = ME_Galileo_Events.1
	title = ME_Galileo_Events.1.T
	desc = ME_Galileo_Events.1.D
	picture = GALILEO_eventPicture

	fire_only_once = yes
	major = yes

	major_trigger = {
		capital_scope = {
			region = italy_region
		}
	}
	
	trigger = {
		OR = {
			tag = PIS
			owns = 115
			tag = LAN
			tag = TUS
		}
		is_year = 1600
	}

	immediate = {
		hidden_effect = {
			set_country_flag = galileo_has_arrived
			set_variable = {
				which = passive_galileo
				value = 0
			}
			set_variable = {
				which = rebellious_galileo
				value = 0
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = ME_Galileo_Events.1.OPT1

		add_stability_or_adm_power = yes
		define_advisor = {
			type = artist
			name = "Galileo Galilei"
			skill = 2
			cost_multiplier = 0.5
			culture = tuscan
			religion = catholic
		}
	}

	option = {
		name = ME_Galileo_Events.1.OPT2

		add_years_of_income = 0.5
		define_advisor = {
			type = natural_scientist
			name = "Galileo Galilei"
			skill = 2
			cost_multiplier = 0.5
			culture = tuscan
			religion = catholic
		}
	}

	option = {
		name = ME_Galileo_Events.1.OPT3

		add_prestige = 20
		define_advisor = {
			type = philosopher
			name = "Galileo Galilei"
			skill = 2
			cost_multiplier = 0.5
			culture = tuscan
			religion = catholic
		}
	}
}

#The Leaning Tower of Pisa's experiment
country_event = {
	id = ME_Galileo_Events.2
	title = ME_Galileo_Events.2.T
	desc = ME_Galileo_Events.2.D
	picture = GALILEO_PISA_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
		owns = 115
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events.2.OPT1

		ai_chance = { factor = 50 }

		random_list = {
			95 = {
				#An outstanding discovery
				country_event = {
					id = ME_Galileo_Events.3
					days = 1
				}
			}
			5 = {
				country_event = {
					id = ME_Galileo_Events.4
					days = 1
				}
			}
		}
	}

	option = {
		name = ME_Galileo_Events.2.OPT2

		ai_chance = { factor = 50 }

		add_prestige = -5
	}
}

#An Outstanding Discovery
country_event = {
	id = ME_Galileo_Events.3
	title = ME_Galileo_Events.3.T
	desc = ME_Galileo_Events.3.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	option = {
		name = ME_Galileo_Events.3.OPT1

		ai_chance = { factor = 50 }

		add_prestige = 20
		add_adm_power = -100
		change_variable = {
			which = rebellious_galileo
			value = -1
		}
	}

	option = {
		name = ME_Galileo_Events.3.OPT2

		ai_chance = { factor = 50 }

		add_prestige = 50
		if = {
			limit = {
				exists = PAP
			}
			add_opinion = {
				who = PAP
				modifier = galileo_great_scientific_discovery_opinion
			}
			reverse_add_opinion = {
				who = PAP
				modifier = galileo_great_scientific_discovery_opinion
			}
		}
		add_country_modifier = {
			name = galileo_great_scientific_discovery
			duration = 18250
		}
		change_variable = {
			which = rebellious_galileo
			value = 1
		}
	}
}

#Pedestrian Killed!
country_event = {
	id = ME_Galileo_Events.4
	title = ME_Galileo_Events.4.T
	desc = ME_Galileo_Events.4.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	option = {
		name = ME_Galileo_Events.4.OPT1

		ai_chance = { factor = 33 }

		clr_country_flag = galileo_has_arrived
		custom_tooltip = Galileo_gone_tt
		hidden_effect = {
			if = {
				limit = {
					has_advisor = yes
				}
			}
		}
	}

	option = {
		name = ME_Galileo_Events.4.OPT2

		ai_chance = { factor = 33 }

		custom_tooltip = galileo_defend_ideas_tt
		add_prestige = 50
		if = {
			limit = {
				exists = PAP
			}
			add_opinion = {
				who = PAP
				modifier = galileo_great_scientific_discovery_opinion
			}
			reverse_add_opinion = {
				who = PAP
				modifier = galileo_great_scientific_discovery_opinion
			}
		}
		add_country_modifier = {
			name = galileo_great_scientific_discovery
			duration = 18250
		}
		change_variable = {
			which = rebellious_galileo
			value = 2
		}
	}

	option = {
		name = ME_Galileo_Events.4.OPT3

		ai_chance = { factor = 33 }

		add_mil_power = -25
		add_years_of_income = -0.5
		custom_tooltip = galileo_work_privately_tt
		change_variable = {
			which = rebellious_galileo
			value = -1
		}
	}
}

#The Theory of Tides
country_event = {
	id = ME_Galileo_Events.5
	title = ME_Galileo_Events.5.T
	desc = ME_Galileo_Events.5.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
		check_variable = {
			which = rebellious_galileo
			value = 2
		}
	}

	mean_time_to_happen = {
		years = 10
	}

	option = {
		name = ME_Galileo_Events.5.OPT1

		ai_chance = { factor = 50 }

		add_prestige = 15
		custom_tooltip = galileo_defend_ideas_tt
		change_variable = {
			which = rebellious_galileo
			value = 1
		}
	}

	option = {
		name = ME_Galileo_Events.5.OPT2

		ai_chance = { factor = 50 }

		custom_tooltip = galileo_work_privately_tt
		change_variable = {
			which = rebellious_galileo
			value = -1
		}
	}
}

#A possible tutor
country_event = {
	id = ME_Galileo_Events.6
	title = ME_Galileo_Events.6.T
	desc = ME_Galileo_Events.6.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
		NOT = {
			check_variable = {
				which = rebellious_galileo
				value = 0
			}
		}
	}

	mean_time_to_happen = {
		years = 10
	}

	option = {
		name = ME_Galileo_Events.6.OPT1

		trigger = {
			hidden_trigger = {
				is_expanded_mod_active = {
					mod = flavour_and_events
				}
				has_heir = yes
			}
		}

		ai_chance = { factor = 33 }

		add_years_of_income = -1
		add_education_effect_medium = yes
	}

	option = {
		name = ME_Galileo_Events.6.OPT2

		ai_chance = { factor = 33 }

		add_years_of_income = -0.5
		add_country_modifier = {
			name = galileo_rapid_innovation
			duration = -1
		}
		custom_tooltip = galileo_modifiers_end
	}

	option = {
		name = ME_Galileo_Events.6.OPT3

		ai_chance = { factor = 33 }

		custom_tooltip = galileo_defend_ideas_tt
		change_variable = {
			which = rebellious_galileo
			value = 1
		}
	}
}

#The Assayer
country_event = {
	id = ME_Galileo_Events.7
	title = ME_Galileo_Events.7.T
	desc = ME_Galileo_Events.7.D
	picture = BIG_BOOK_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	immediate = {
		hidden_effect = {
			set_country_flag = galileo_assayer
		}
	}

	option = {
		name = ME_Galileo_Events.7.OPT1

		ai_chance = { factor = 33 }

		change_innovativeness = 3
		if = {
			limit = {
				exists = PAP
			}
			add_opinion = {
				who = PAP
				modifier = galileo_spread_heresy
			}
			reverse_add_opinion = {
				who = PAP
				modifier = galileo_spread_heresy
			}
		}
		custom_tooltip = galileo_defend_ideas_tt
		change_variable = {
			which = rebellious_galileo
			value = 1
		}
	}

	option = {
		name = ME_Galileo_Events.7.OPT2
		trigger = {
			religion = catholic
			exists = PAP
		}

		ai_chance = { factor = 33 }

		random_list = {
			50 = {
				country_event = {
					id = ME_Galileo_Events.8
				}
			}
			50 = {
				country_event = {
					id = ME_Galileo_Events.9
				}
			}
		}
	}

	option = {
		name = ME_Galileo_Events.7.OPT3

		ai_chance = { factor = 33 }

		if = {
			limit = {
				religion = catholic
			}
			add_papal_influence = 5
		}
		if = {
			limit = {
				exists = PAP
			}
			add_opinion = {
				who = PAP
				modifier = galileo_heresy_cleansed
			}
			reverse_add_opinion = {
				who = PAP
				modifier = galileo_heresy_cleansed
			}
		}
		custom_tooltip = galileo_work_privately_tt
		change_variable = {
			which = rebellious_galileo
			value = -1
		}
	}
}

#The Pope likes it
country_event = {
	id = ME_Galileo_Events.8
	title = ME_Galileo_Events.8.T
	desc = ME_Galileo_Events.8.D
	picture = POPE_PREACHING_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
		religion = catholic
	}

	option = {
		name = ME_Galileo_Events.8.OPT1

		ai_chance = { factor = 100 }

		add_papal_influence = 10
	}
}

#The Pope hates it
country_event = {
	id = ME_Galileo_Events.9
	title = ME_Galileo_Events.9.T
	desc = ME_Galileo_Events.9.D
	picture = BAD_POPE_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		exists = PAP
	}

	option = {
		name = ME_Galileo_Events.9.OPT1

		ai_chance = { factor = 100 }
		
		add_opinion = {
			who = PAP
			modifier = galileo_diplomatic_insult
		}
		PAP = {
			add_casus_belli = {
				type = cb_insult
				target = ROOT
			}
			add_opinion = {
				who = ROOT
				modifier = galileo_diplomatic_insult
			}
		}
	}
}

#The Arcetri observatory
country_event = {
	id = ME_Galileo_Events.10
	title = ME_Galileo_Events.10.T
	desc = ME_Galileo_Events.10.D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
		had_country_flag = {
			flag = galileo_assayer
			days = 1825
		}
		NOT = {
			check_variable = {
				which = rebellious_galileo
				value = 0
			}
		}
	}

	mean_time_to_happen = {
		years = 1
	}

	option = {
		name = ME_Galileo_Events.10.OPT1

		ai_chance = { factor = 50 }

		add_years_of_income = -1.5
		change_variable = {
			which = rebellious_galileo
			value = -1
		}
		add_country_modifier = {
			name = galileo_observatory
			duration = -1
		}
	}

	option = {
		name = ME_Galileo_Events.10.OPT2

		ai_chance = { factor = 50 }

		change_variable = {
			which = rebellious_galileo
			value = 1
		}
	}
}

#The debate on Heliocentrism
country_event = {
	id = ME_Galileo_Events.11
	title = ME_Galileo_Events.11.T
	desc = ME_Galileo_Events.11.D
	picture = GALILEO_DEBATE_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events.11.OPT1

		ai_chance = { factor = 33 }

		custom_tooltip = Galileo_killed_tt
		clr_country_flag = galileo_has_arrived
	}

	option = {
		name = ME_Galileo_Events.11.OPT2

		ai_chance = { factor = 33 }
	}

	option = {
		name = ME_Galileo_Events.11.OPT3

		ai_chance = { factor = 33 }
	}
}

country_event = {
	id = ME_Galileo_Events.
	title = ME_Galileo_Events..T
	desc = ME_Galileo_Events..D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events..OPT1

		ai_chance = { factor = 100 }
	}
}

country_event = {
	id = ME_Galileo_Events.
	title = ME_Galileo_Events..T
	desc = ME_Galileo_Events..D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events..OPT1

		ai_chance = { factor = 100 }
	}
}

country_event = {
	id = ME_Galileo_Events.
	title = ME_Galileo_Events..T
	desc = ME_Galileo_Events..D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events..OPT1

		ai_chance = { factor = 100 }
	}
}

country_event = {
	id = ME_Galileo_Events.
	title = ME_Galileo_Events..T
	desc = ME_Galileo_Events..D
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	
	trigger = {
		has_country_flag = galileo_has_arrived
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = ME_Galileo_Events..OPT1

		ai_chance = { factor = 100 }
	}
}