#########
#Made by claivin for Missions Expanded Mod
#########

namespace = rel_missions_events

#CATHOLIC EVENTS
################################
country_event = {
	id = rel_missions_events.1
	title = rel_missions_events.1.t
	picture = CONQUEST_eventPicture
	desc = rel_missions_events.1.d

	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.1.c
		highlight = yes 
		
		inherit = KOJ
		change_government = monarchy
		add_government_reform = crusader_kingdom
		custom_tooltip = crusader_kingdom_headsup
	}
	
	option = {
		name = rel_missions_events.1.a
		inherit = KOJ
	}
	
	option = {
		name = rel_missions_events.1.b
		inherit = KOJ
		change_tag = KOJ
	}
	
	option = {
		name = rel_missions_events.1.e
		add_papal_influence = 10
	}
}

country_event = { #expel minorities for SENDER
	id = rel_missions_events.2
	title = rel_missions_events.2.t
	picture = CONQUEST_eventPicture
	desc = rel_missions_events.2.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.2.a
		random_owned_province = {
			limit = {
				has_owner_culture = no
				has_owner_accepted_culture = no
				has_owner_religion = yes
			}
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
			change_culture = ROOT
		}
		add_adm_power = 20
		add_dip_power = 20
		add_mil_power = 20
	}
}

country_event = { #expel minorities for RECIEVER
	id = rel_missions_events.4
	title = rel_missions_events.4.t
	picture = CONQUEST_eventPicture
	desc = rel_missions_events.4.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.4.a
		ai_chance = { factor = 33 }
		random_owned_province = {
			add_province_modifier = {
				name = rel_foreign_quarter
				duration = 3650
			}
			add_base_tax = 1
		}
	}
	
	option = {
		name = rel_missions_events.4.b
		ai_chance = { factor = 33 }
		random_owned_province = {
			add_province_modifier = {
				name = rel_foreign_quarter
				duration = 3650
			}
			add_base_production = 1
		}
	}
	
	option = {
		name = rel_missions_events.4.c
		ai_chance = { factor = 33 }
		random_owned_province = {
			add_province_modifier = {
				name = rel_foreign_quarter
				duration = 3650
			}
			add_base_manpower = 1
		}
	}
	
	option = {
		name = rel_missions_events.4.e
		ai_chance = { factor = 0 }
		random_neighbor_country = {
			id = rel_missions_events.4
		}
	}
}

country_event = { #hire crusaders for SENDER
	id = rel_missions_events.3
	title = rel_missions_events.3.t
	picture = CONQUEST_eventPicture
	desc = rel_missions_events.3.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.3.a
		add_yearly_manpower = 1.0
		add_army_tradition = 7.5
	}
}

country_event = { #hire crusaders for RECIEVER
	id = rel_missions_events.5
	title = rel_missions_events.5.t
	picture = CONQUEST_eventPicture
	desc = rel_missions_events.5.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.5.a
		ai_chance = { factor = 33 }
		add_prestige = 10
		add_years_of_income = 1.0
	}
	
	option = {
		name = rel_missions_events.5.b
		ai_chance = { factor = 33 }
		add_legitimacy = 10
		add_years_of_income = 1.0
	}
	
	option = {
		name = rel_missions_events.5.b
		ai_chance = { factor = 33 }
		add_years_of_income = 2.0
	}
}

country_event = { #schism mended
	id = rel_missions_events.15
	title = rel_missions_events.15.t
	picture = REFORM_eventPicture
	desc = rel_missions_events.15.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.15.a
		add_country_modifier = {
			name = rel_cath_schism_mended
			duration = -1
		}
	}
}

#TERRITORIAL CONVERSION EVENTS
#######################
country_event = { #territorial conversion event - normal
	id = rel_missions_events.6
	title = rel_missions_events.6.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.6.d
	
	mean_time_to_happen = {
		months = 360
	}
	trigger = {
		any_owned_province = {
			NOT = { 
				religion = ROOT
			}
			is_territory = yes
		}
		has_country_flag = rel_territorial_conversion_events
	}
	option = {
		name = rel_missions_events.6.a
		random_owned_province = {
			limit = {
				NOT = {
					religion = ROOT
				}
				is_territory = yes
			}
			change_religion = ROOT
		}
	}
}

country_event = { #territorial conversion event - better
	id = rel_missions_events.7
	title = rel_missions_events.7.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.7.d
	
	mean_time_to_happen = {
		months = 540
	}
	trigger = {
		any_owned_province = {
			NOT = { 
				religion = ROOT
			}
			is_territory = yes
		}
		has_country_flag = rel_territorial_conversion_events
	}
	option = {
		name = rel_missions_events.7.a
		trigger = {
			religion = catholic
		}
		random_owned_province = {
			limit = {
				NOT = {
					religion = ROOT
				}
				is_territory = yes
			}
			change_religion = catholic
			add_province_modifier = {
				name = territorial_coversion_new
				duration = 3650
			}
		}
	}
}

country_event = { #territorial conversion event - really good
	id = rel_missions_events.8
	title = rel_missions_events.8.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.8.d
	
	mean_time_to_happen = {
		months = 720
	}
	trigger = {
		any_owned_province = {
			NOT = { 
				religion = ROOT
			}
			is_territory = yes
		}
		has_country_flag = rel_territorial_conversion_events
	}
	option = {
		name = rel_missions_events.8.a
		trigger = {
			religion = catholic
		}
		random_owned_province = {
			limit = {
				NOT = {
					religion = ROOT
				}
				is_territory = yes
			}
			change_religion = ROOT
			add_base_tax = 1
		}
	}
}

country_event = { #territorial conversion event -really really good
	id = rel_missions_events.9
	title = rel_missions_events.9.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.9.d
	
	mean_time_to_happen = {
		months = 1000
	}
	trigger = {
		any_owned_province = {
			NOT = { 
				religion = ROOT
			}
			is_territory = yes
		}
		has_country_flag = rel_territorial_conversion_events
	}
	option = {
		name = rel_missions_events.9.a
		trigger = {
			religion = catholic
		}
		random_owned_province = {
			limit = {
				NOT = {
					religion = ROOT
				}
				is_territory = yes
			}
			change_religion = ROOT
		}
		add_stability_or_adm_power = yes
	}
}

country_event = { #schism mended
	id = rel_missions_events.15
	title = rel_missions_events.15.t
	picture = REFORM_eventPicture
	desc = rel_missions_events.15.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.15.a
		add_country_modifier = {
			name = rel_cath_schism_mended
			duration = -1
		}
	}
}

#MUSLIM EVENTS
#########################
country_event = { #cede forts to OOA
	id = rel_missions_events.10
	title = rel_missions_events.10.t
	picture = CITY_VIEW_eventPicture
	desc = rel_missions_events.10.d
	
	is_triggered_only = yes
	
	immediate = {
		random_owned_province = {
			limit = {
				is_capital = no
				fort_level = 2
				NOT = {
					has_province_flag = assassin_prov_2
				}
				NOT = {
					has_province_flag = assassin_prov_3
				}
			}
			set_province_flag = assassin_prov_1
			save_event_target_as = cede_to_assassin_1
		}
		random_owned_province = {
			limit = {
				is_capital = no
				fort_level = 2
				NOT = {
					has_province_flag = assassin_prov_1
				}
				NOT = {
					has_province_flag = assassin_prov_3
				}
			}
			set_province_flag = assassin_prov_2
			save_event_target_as = cede_to_assassin_2
		}
		random_owned_province = {
			limit = {
				is_capital = no
				fort_level = 2
				NOT = {
					has_province_flag = assassin_prov_1
				}
				NOT = {
					has_province_flag = assassin_prov_2
				}
			}
			set_province_flag = assassin_prov_3
			save_event_target_as = cede_to_assassin_3
		}
	}
	option = {
		name = rel_missions_events.10.a
		trigger = {
			num_of_owned_provinces_with = {
				value = 1
				is_capital = no
				fort_level = 2
			}
		}
		event_target:cede_to_assassin_1 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
	}
	option = {
		name = rel_missions_events.10.b
		trigger = {
			num_of_owned_provinces_with = {
				value = 2
				is_capital = no
				fort_level = 2
			}
		}
		event_target:cede_to_assassin_1 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
		event_target:cede_to_assassin_2 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
	}
	option = {
		name = rel_missions_events.10.c
		trigger = {
			num_of_owned_provinces_with = {
				value = 3
				is_capital = no
				fort_level = 2
			}
		}
		event_target:cede_to_assassin_1 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
		event_target:cede_to_assassin_2 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
		event_target:cede_to_assassin_3 = {
			limit = {
				is_capital = no
				fort_level = 2
			}
			add_core = OOA
			cede_province = OOA
		}
	}
	option = {
		name = rel_missions_events.10.e
	}
}

country_event = { #assassinating the ruler
	id = rel_missions_events.11
	title = rel_missions_events.11.t
	picture = ASSASSINATION_eventPicture
	desc = rel_missions_events.11.d
	
	is_triggered_only = yes
	
	option = { #assassinate covertly
		name = rel_missions_events.11.a
		FROM = {
			kill_ruler = yes
		}
	}
	option = { #assassinate publicly
		name = rel_missions_events.11.b
		random_list = { 
			75 = {
				FROM = {
					kill_ruler = yes
					all_rival_country = {
						add_opinion = {
							who = ROOT
							modifier = public_assassination_on_rival
						}
					}
					add_opinion = {
						who = ROOT
						modifier = public_assassination_victim
					}
					add_country_modifier = {
						name = rel_assassinated_ruler
						duration = 1825
					}
				}
				ROOT = {
					all_neighbor_country = {
						add_opinion = {
							who = ROOT
							modifier = public_assassination_neighbors
						}
					}
				}
			}
			25 = {
				ROOT = {
					add_country_modifier = {
						name = rel_failed_assassination
						duration = 1825
					}
					add_prestige = -25
				}
				FROM = {
					add_casus_belli = {
						target = ROOT
						type = cb_insult
						months = 60
					}
				}
			}
		}
	}
}

country_event = { #transitory event
	id = rel_missions_events.12
	title = rel_missions_events.12.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.12.d
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		event_target:assassin_master = {
			country_event = {
				id = rel_missions_events.11
			}
		}
		clear_global_event_target = assassin_master
	}
}

country_event = { #for cradle owners
	id = rel_missions_events.13
	title = rel_missions_events.13.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.13.d
	
	is_triggered_only = yes
	
	option = { #doubling powers for Hanbali
		name = rel_missions_events.13.a
		trigger = {
			religious_school = {
				group = muslim
				school = hanbali_school
			}
		}
		add_country_modifier = {
			name = rel_unify_hanbali
			duration = -1
		}
	}
	option = { #doubling powers for Hanafi
		name = rel_missions_events.13.b
		trigger = {
			religious_school = {
				group = muslim
				school = hanafi_school
			}
		}
		add_country_modifier = {
			name = rel_unify_hanafi
			duration = -1
		}
	}
	option = { #doubling powers for Maliki
		name = rel_missions_events.13.c
		trigger = {
			religious_school = {
				group = muslim
				school = maliki_school
			}
		}
		add_country_modifier = {
			name = rel_unify_maliki
			duration = -1
		}
	}
	option = { #doubling powers for Shafi'i
		name = rel_missions_events.13.e
		trigger = {
			religious_school = {
				group = muslim
				school = shafii_school
			}
		}
		add_country_modifier = {
			name = rel_unify_shafii
			duration = -1
		}
	}
	
	option = {
		name = rel_missions_events.13.f
		trigger = {
			NOT = {
				religious_school = {
					group = muslim
					school = hanbali_school
				}
			}
		}
		set_religious_school = {
			group = muslim
			school = hanbali_school
		}
		add_country_modifier = {
			name = rel_unify_hanbali
			duration = -1
		}
	}
	
	option = {
		name = rel_missions_events.13.g
		trigger = {
			NOT = {
				religious_school = {
					group = muslim
					school = maliki_school
				}
			}
		}
		set_religious_school = {
			group = muslim
			school = maliki_school
		}
		add_country_modifier = {
			name = rel_unify_maliki
			duration = -1
		}
	}
	
	option = {
		name = rel_missions_events.13.h
		trigger = {
			NOT = {
				religious_school = {
					group = muslim
					school = shafii_school
				}
			}
		}
		set_religious_school = {
			group = muslim
			school = shafii_school
		}
		add_country_modifier = {
			name = rel_unify_shafii
			duration = -1
		}
	}
	
	option = {
		name = rel_missions_events.13.i
		trigger = {
			NOT = {
				religious_school = {
					group = muslim
					school = hanafi_school
				}
			}
		}
		set_religious_school = {
			group = muslim
			school = hanbali_school
		}
		add_country_modifier = {
			name = rel_unify_hanafi
			duration = -1
		}
	}
}

country_event = { #schools syncretized
	id = rel_missions_events.14
	title = rel_missions_events.14.t
	picture = RELIGION_eventPicture
	desc = rel_missions_events.14.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.14.a
		add_country_modifier = {
			name = rel_not_own_coc_buff
			duration  = -1
		}
	}
}

country_event = { #sunni-shia split mended
	id = rel_missions_events.16
	title = rel_missions_events.16.t
	picture = REFORM_eventPicture
	desc = rel_missions_events.16.d
	
	is_triggered_only = yes
	
	option = {
		name = rel_missions_events.16.a
		add_country_modifier = {
			name = sunni_shia_schism_mended
			duration  = -1
		}
	}
}