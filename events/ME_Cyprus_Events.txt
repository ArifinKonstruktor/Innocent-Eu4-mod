namespace = ME_Cyprus_Events

country_event = { # Cypriot Revolt
	id = ME_Cyprus_Events.100
	title = ME_Cyprus_Events.EVTNAME100
	desc = ME_Cyprus_Events.EVTDESC100
	picture = HARBOUR_eventPicture
	
	fire_only_once = yes
	mean_time_to_happen = { #Random Event that is not triggered, it just happens.
		months = 24
	}

	trigger = {
		tag = CYP
		owns = 321
	}
	
	option = {
		name = ME_Cyprus_Events100.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		321 = {
			change_religion = catholic
			add_cardinal = yes
			spawn_rebels = {
				type = orthodox_rebels
				size = 1
			}
		}
		add_papal_influence = 20
		set_country_flag = cyprus_is_catholic
		swap_non_generic_missions = yes
	}
	
	option = {
		name = ME_Cyprus_Events100.EVTOPT2

		ai_chance = {
			factor = 0.5
		}		
		change_religion = orthodox
		change_primary_culture = greek
		add_patriarch_authority = 0.20
		321 = {
			spawn_rebels = {
				type = catholic_rebels
				size = 1
			}
		}
		set_country_flag = cyprus_is_orthodox
		swap_non_generic_missions = yes
	}
}

country_event = { # The King of Jerusalem?
	id = ME_Cyprus_Events.1
	title = ME_Cyprus_Events.EVTNAME1
	desc = ME_Cyprus_Events.EVTDESC1
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events1.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_treasury = 3000
		add_prestige = -30
		random_country = {
			limit = {
				religion = catholic
			}
			1854 = {
				if = {
					limit = {
						NOT = { is_core = PREV }
					}
					add_core = PREV
				}
			}
			364 = {
				if = {
					limit = {
						NOT = { is_core = PREV }
					}
					add_core = PREV
				}
			}
			379 = {
				if = {
					limit = {
						NOT = { is_core = PREV }
					}
					add_core = PREV
				}
			}
			# ADD DECISION
		}
		# REMOVE DECISION
	}
	
	option = {
		name = ME_Cyprus_Events1.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = 10
		1854 = {
			if = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
		}
		364 = {
			if = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
		}
		379 = {
			if = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
		}
	}
}

country_event = { # We? We Found the?
	id = ME_Cyprus_Events.2
	title = ME_Cyprus_Events.EVTNAME2
	desc = ME_Cyprus_Events.EVTDESC2
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events2.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_treasury = -100
		add_prestige = 50
		163 = {
			#Has 1° lvl fort
			if = {
					limit = {
						has_building = fort_15th
					}
					add_building_construction = {
						building = fort_16th
						speed = 0.5
						cost = 0
					}
				}
				#Has 2° lvl fort
				else_if = {
					limit = {
						has_building = fort_16th
					}
					add_building_construction = {
						building = fort_17th
						speed = 0.5
						cost = 0
					}
				}
				#Has 3° lvl fort
				else_if = {
					limit = {
						has_building = fort_17th
					}
					add_building_construction = {
						building = fort_18th
						speed = 0.5
						cost = 0
					}
				}
				else = {
					add_building_construction = {
						building = fort_15th
						speed = 0.5
						cost = 0
					}
				}
			add_province_modifier = {
				name = cyp_labyrinth_crete
				duration = -1
			}
		}
	}
	
	option = {
		name = ME_Cyprus_Events2.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -15
	}
}

country_event = { # A Fort in the Mountains.
	id = ME_Cyprus_Events.3
	title = ME_Cyprus_Events.EVTNAME3
	desc = ME_Cyprus_Events.EVTDESC3
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events3.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		country_event = {
			id = ME_Cyprus_Events.4
			days = 90
		}
	}
	
	option = {
		name = ME_Cyprus_Events3.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -5
	}
}

country_event = { # A Fort in the Mountains.2
	id = ME_Cyprus_Events.4
	title = ME_Cyprus_Events.EVTNAME4
	desc = ME_Cyprus_Events.EVTDESC4
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events4.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_manpower = -1
		country_event = {
			id = ME_Cyprus_Events.5
			days = 10
		}
	}
	
	option = {
		name = ME_Cyprus_Events4.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -5
	}
}

country_event = { # A Fort in the Mountains.3
	id = ME_Cyprus_Events.5
	title = ME_Cyprus_Events.EVTNAME5
	desc = ME_Cyprus_Events.EVTDESC5
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events5.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_treasury = 1000
	}
	option = {
		name = ME_Cyprus_Events5.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		# DECISION TRANSCRIBE THE LATIN SCROLL
		add_treasury = 750
	}
}

country_event = { # A Movement.
	id = ME_Cyprus_Events.6
	title = ME_Cyprus_Events.EVTNAME6
	desc = ME_Cyprus_Events.EVTDESC6
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events6.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_treasury = -50
		create_admiral = {
			add_fire = 4
			add_schock = 3
			add_manuever = 5
			add_siege = 1
		}
	}
	
	option = {
		name = ME_Cyprus_Events6.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -5
	}
}

country_event = { # Filiki Eteria
	id = ME_Cyprus_Events.7
	title = ME_Cyprus_Events.EVTNAME7
	desc = ME_Cyprus_Events.EVTDESC7
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events7.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_treasury = -100
		every_province = {
			limit = {
				culture_group = byzantine
				owner = {
					NOT = { culture_group = byzantine }
				}
				NOT = { owned_by = ROOT }
				NOT = { owned_by = GRE }
			}
			add_unrest = 15
		}
		if = {
			limit = {
				exists = TUR
			}
			TUR = {
				country_event = { id = ME_Cyprus_Events.12 }
			}
		}
		country_event = { id = ME_Cyprus_Events.8 }
	}
	
	option = {
		name = ME_Cyprus_Events7.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = -10
		if = {
			limit = {
				exists = TUR
			}
			TUR = {
				country_event = { id = ME_Cyprus_Events.12 }
			}
		}
	}
}

country_event = { # Greek War of Independence
	id = ME_Cyprus_Events.8
	title = ME_Cyprus_Events.EVTNAME8
	desc = ME_Cyprus_Events.EVTDESC8
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events8.EVTOPT1

		ai_chance = {
			factor = 1
		}
		every_province = {
			limit = {
				culture_group = byzantine
				owner = {
					NOT = { culture_group = byzantine }
				}
				NOT = { owned_by = ROOT }
				NOT = { owned_by = GRE }
			}
			add_unrest = 15
		}
		144 = { #Yania
			spawn_rebels = {
				friend = ROOT
				type = cypriot_rebels
				size = 3
			}
		}
		146 = { #Athens
			spawn_rebels = {
				friend = ROOT
				type = cypriot_rebels
				size = 3
			}
		}
	}
}

country_event = { # After the Greek Revolution
	id = ME_Cyprus_Events.9
	title = ME_Cyprus_Events.EVTNAME9
	desc = ME_Cyprus_Events.EVTDESC9
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events9.EVTOPT1

		ai_chance = {
			factor = 1
		}
	}
}

country_event = { # A Greek Revolution
	id = ME_Cyprus_Events.10
	title = ME_Cyprus_Events.EVTNAME10
	desc = ME_Cyprus_Events.EVTDESC10
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events10.EVTOPT1

		ai_chance = {
			factor = 1
		}
	}
}

country_event = {
	id = ME_Cyprus_Events.11
	title = ME_Cyprus_Events.EVTNAME11
	desc = ME_Cyprus_Events.EVTDESC11
	picture = HARBOUR_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events11.EVTOPT1
		
		ai_chance = {
			factor = 0.33
		}
		
		add_manpower = -3
		321 = {
			infantry = FROM
			infantry = FROM
			infantry = FROM
		}
	}

	option = {
		name = ME_Cyprus_Events11.EVTOPT2

		ai_chance = {
			factor = 0.33
		}
		
		FROM = {
			add_treasury = 50
		}
	}
	
	option = {
		name = ME_Cyprus_Events11.EVTOPT3

		ai_chance = {
			factor = 0.33
		}
		
		every_country = {
			limit = {
				religion = catholic
			}
			add_opinion = {
				who = ROOT
				modifier = pap_affairs_italy
			}
		}
		add_ruler_modifier = {
			name = pap_abandoned_cyprus
			duration = -1
			hidden = yes
		}
	}
}


country_event = { #The Cypriot and the Greeks
	id = ME_Cyprus_Events.12
	title = ME_Cyprus_Events.EVTNAME12
	desc = ME_Cyprus_Events.EVTDESC12
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = ME_Cyprus_Events12.EVTOPT1

		ai_chance = {
			factor = 0.5
		}
		
		add_manpower = -4
		add_treasury = -50
		every_owned_province = {
			limit = {
				culture_group = byzantine
			}
			add_unrest = -12
		}
	}
	
	option = {
		name = ME_Cyprus_Events12.EVTOPT2

		ai_chance = {
			factor = 0.5
		}
		
		add_prestige = 10
	}
}

country_event = {
	id = ME_Cyprus_Events.13
	title = ME_Cyprus_Events.EVTNAME13
	desc = ME_Cyprus_Events.EVTDESC13
	picture = HARBOUR_eventPicture

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = ME_Cyprus_Events13.EVTOPT1
		
		ai_chance = { factor = 0.5 }
		
		if = {
			limit = {
				is_expanded_mod_active = { mod = subjects }
				FROM = {
					can_be_overlord = crusader_state_vassal
				}
			}
			FROM = {
				create_subject = {
					subject = ROOT
					subject_type = crusader_state_vassal
				}
			}
		}
		else = {
			FROM = {
				create_march = ROOT
			}
		}
	}

	option = {
		name = ME_Cyprus_Events13.EVTOPT2

		ai_chance = { factor = 0.5 }
		
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = kni_declined_pact
			}
		}
	}
}

country_event = { # Byzantine Fire?
	id = ME_Cyprus_Events.14
	title = ME_Cyprus_Events.EVTNAME14
	desc = ME_Cyprus_Events.EVTDESC14
	picture = HARBOUR_eventPicture
	
	is_triggered_only = yes

	option = {
		name = ME_Cyprus_Events14.EVTOPT1

		ai_chance = {
			factor = 1
		}
		
		add_country_modifier = {
			name = cyp_greek_fire
			duration = -1
		}
	}
}