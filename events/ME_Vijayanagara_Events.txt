namespace = ME_Vijayanagara_Events

#Seven Iakh
country_event = {
	id = ME_Vijayanagara_Events.1
	title = ME_Vijayanagara_Events.1.T
	desc = ME_Vijayanagara_Events.1.D
	picture = CITY_VIEW_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		months = 1
	}

	trigger = {
		tag = VIJ
		BAH = {
			capital_scope = {
				controlled_by = ROOT
			}
		}
	}

	option = {
		name = ME_Vijayanagara_Events.1.OPT1

		ai_chance = { factor = 1 }

		add_years_of_income = 1
		BAH = {
			capital_scope = {
				add_devastation = 50
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
			}
		}
	}
}

#Quelling Kerala
country_event = {
	id = ME_Vijayanagara_Events.2
	title = ME_Vijayanagara_Events.2.T
	desc = ME_Vijayanagara_Events.2.D
	picture = ANGRY_MOB_eventPicture

	fire_only_once = yes

	trigger = {
		tag = VIJ
		malabar_area = {
			owned_by = ROOT
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	option = {
		name = ME_Vijayanagara_Events.2.OPT1

		ai_chance = { factor = 0.50 }
		
		malabar_area = {
			add_province_modifier = {
				name = vij_local_ruling
				duration = 5475
			}
		}
		if = {
			limit = {
				has_estate = estate_maratha
			}
			add_estate_loyalty_modifier = {
				estate = estate_maratha
				desc = vij_local_ruling_estate
				loyalty = 5
				duration = 15
			}
			add_estate_influence_modifier = {
				estate = estate_maratha
				desc = vij_local_ruling_estate
				influence = -50
				duration = 7300
			}
		}
		else_if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty_modifier = {
				estate = estate_nobles
				desc = vij_local_ruling_estate
				loyalty = 5
				duration = 15
			}
			add_estate_influence_modifier = {
				estate = estate_nobles
				desc = vij_local_ruling_estate
				influence = -50
				duration = 7300
			}
		}
	}

	option = {
		name = ME_Vijayanagara_Events.2.OPT2

		ai_chance = { factor = 0.50 }

		malabar_area = {
			add_province_modifier = {
				name = vij_new_governance
				duration = 5475
			}
		}
	}
}

#Dandanayaka brothers
country_event = {
	id = ME_Vijayanagara_Events.3
	title = ME_Vijayanagara_Events.3.T
	desc = ME_Vijayanagara_Events.3.D
	picture = GENERALS_DISCUSSING_eventPicture

	fire_only_once = yes

	trigger = {
		tag = VIJ
		has_ruler = "Devaraya II"
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		set_country_flag = vij_dandanayaka_brothers
	}

	option = {
		name = ME_Vijayanagara_Events.3.OPT1

		ai_chance = { factor = 50 }

		define_general = {
			name = "Lakkanna Dandanayaka"
			fire = 3
			shock = 2
			manuever = 4
			siege = 1
			trait = defensive_planner_personality
		}

		define_advisor = {
			type = diplomat
			skill = 2
			cost_multiplier = 0.5
			culture = ROOT
			religion = ROOT
			name = "Madanna Dandanayaka"
		}
	}
}

#Lakkanna Lord of the Southern Ocean
country_event = {
	id = ME_Vijayanagara_Events.4
	title = ME_Vijayanagara_Events.4.T
	desc = ME_Vijayanagara_Events.4.D
	picture = DIPLOMACY_SIGNING_eventPicture

	fire_only_once = yes

	trigger = {
		tag = VIJ
		has_leader = "Lakkanna Dandanayaka"
		lanka_area = {
			type = all
			country_or_non_sovereign_subject_holds = ROOT
		}
		south_lanka_area = {
			type = all
			country_or_non_sovereign_subject_holds = ROOT
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = ME_Vijayanagara_Events.4.OPT1

		ai_chance = { factor = 50 }

		add_years_of_income = 0.25
		lanka_area = {
			add_unrest = -2
			add_local_autonomy = -33
			add_nationalism = -3
		}
		south_lanka_area = {
			add_unrest = -2
			add_local_autonomy = -33
			add_nationalism = -3
		}
	}
}

#Madanna voyages
country_event = {
	id = ME_Vijayanagara_Events.5
	title = ME_Vijayanagara_Events.5.T
	desc = ME_Vijayanagara_Events.5.D
	picture = DIPLOMACY_eventPicture

	fire_only_once = yes

	trigger = {
		tag = VIJ
		has_country_flag = vij_dandanayaka_brothers
		is_at_war = no
		employed_advisor = {
			type = diplomat
			culture = ROOT
			religion = ROOT
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = ME_Vijayanagara_Events.5.OPT1

		ai_chance = { factor = 50 }
		
		custom_tooltip = VIJ_PEGU_TRADE
	}

	option = {
		name = ME_Vijayanagara_Events.5.OPT2

		ai_chance = { factor = 50 }

		custom_tooltip = VIJ_PEGU_TRIBUTE
	}
}